{"version":3,"sources":["webpack://DependentSelectBox/webpack/universalModuleDefinition","webpack://DependentSelectBox/webpack/bootstrap","webpack://DependentSelectBox/./src/assets/DependentSelectBox/constants.ts","webpack://DependentSelectBox/./src/assets/DependentSelectBox/utils.ts","webpack://DependentSelectBox/./src/assets/DependentSelectBox/ParentsManager.ts","webpack://DependentSelectBox/./src/assets/DependentSelectBox/RequestManager.ts","webpack://DependentSelectBox/./src/assets/DependentSelectBox/DataManager.ts","webpack://DependentSelectBox/./src/assets/DependentSelectBox/DOMManager.ts","webpack://DependentSelectBox/./src/assets/DependentSelectBox/index.ts","webpack://DependentSelectBox/./node_modules/naja/dist/Naja.esm.js","webpack://DependentSelectBox/(webpack)/buildin/global.js","webpack://DependentSelectBox/./node_modules/event-target-shim/index.js","webpack://DependentSelectBox/./src/assets/all.ts","webpack://DependentSelectBox/./node_modules/process/browser.js"],"names":["root","factory","exports","module","define","amd","window","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","DATA_DISALLOW_SUBMIT_WHEN_DISABLED","DATA_LINK","DATA_PARENT_LISTENER","DATA_PARENTS","DATA_SELECT_BOX","EVENT_LOADED","EVENT_LOADING","SELECT_BOX_SELECTOR","maybeGetNumberValue","number","Number","isNaN","maybeDisableSubmit","selectBox","form","disallowSubmit","getAttribute","elements","input","disabled","type","getParentValue","element","includes","Boolean","multiple","isMultiChoice","HTMLSelectElement","selectedOptions","option","push","inputs","document","querySelectorAll","checked","length","getMultiChoiceValue","trim","parentsData","JSON","parse","parents","data","parent","namedItem","setAttribute","naja","handleResponse","dependentSelectBoxes","response","id","getElementById","innerHTML","options","e","CustomEvent","detail","dispatchEvent","handleRequest","request","Promise","link","Error","this","makeRequest","stringify","fetch","headers","history","trigger","selectBoxes","elementIds","ParentsManager","values","addListeners","events","isParentTextBased","forEach","addEventListener","handleChange","findParent","findSelectBoxes","Array","from","event","target","selectBoxParents","formSelectBoxes","getFormSelectBoxes","requestManager","DataManager","filter","initialize","domManager","load","snippetHandler","initParent","commonjsGlobal","globalThis","global","self","_classCallCheck","instance","Constructor","TypeError","_defineProperties","props","descriptor","configurable","writable","_createClass","protoProps","staticProps","_inherits","subClass","superClass","constructor","_setPrototypeOf","_getPrototypeOf","setPrototypeOf","getPrototypeOf","__proto__","_isNativeReflectConstruct","Reflect","construct","sham","Proxy","Date","toString","_assertThisInitialized","ReferenceError","_possibleConstructorReturn","_createSuper","Derived","hasNativeReflectConstruct","result","Super","NewTarget","arguments","apply","_superPropBase","_get","receiver","base","desc","getOwnPropertyDescriptor","Emitter","callback","listeners","stack","splice","stackToCall","slice","listener","resolve","then","once","removeEventListener","defaultPrevented","AbortSignal","_Emitter","_super","_this","aborted","onabort","AbortController","Event","createEvent","initEvent","createEventObject","bubbles","cancelable","signal","polyfillNeeded","__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL","console","log","Request","abortableFetchDecorator","patchTargets","_patchTargets","_patchTargets$Request","NativeRequest","NativeAbortController","_patchTargets$__FORCE","init","realFetch","isPrototypeOf","undefined","abortError","DOMException","err","reject","cancellation","_","race","_abortableFetch","warn","EventTarget","error","AssertionError","assert","condition","description","UIHandler","super","selector","allowedOrigins","location","origin","handler","handleUI","bindUI","body","snippet","selectors","join","bindElement","item","matches","bindForm","forms","mouseEvent","altKey","ctrlKey","shiftKey","metaKey","button","currentTarget","ignoreErrors","submitForm","catch","clickElement","_a","_b","_c","_d","_e","_f","method","url","originalEvent","preventDefault","tagName","HTMLAnchorElement","href","HTMLInputElement","HTMLButtonElement","toUpperCase","pathname","search","FormData","append","coords","getBoundingClientRect","Math","max","floor","pageX","left","pageY","top","isUrlAllowed","urlObject","URL","FormsHandler","uiHandler","processForm","initForms","netteForms","Nette","initForm","inputElement","validateForm","stopImmediatePropagation","RedirectHandler","hasAttribute","forceRedirect","payload","redirect","makeRedirect","locationAdapter","assign","force","isHardRedirect","SnippetHandler","op","replace","content","prepend","insertAdjacentHTML","snippets","updateSnippets","fromCache","keys","updateSnippet","operation","toLowerCase","title","HistoryHandler","popStateHandler","handlePopState","uiCache","saveUrl","pushNewState","configureMode","historyAdapter","replaceState","pushState","defaultOptions","historyUiCache","buildState","state","ui","handleSnippets","handleTitle","normalizeMode","postGet","findSnippets","scriptLoader","loadScripts","ScriptLoader","test","el","createElement","scripts","script","scriptEl","hasAttributes","attrs","attributes","j","attrName","head","appendChild","parentNode","removeChild","Naja","redirectHandler","formsHandler","historyHandler","VERSION","initialized","extensions","extension","Headers","transformData","abortController","credentials","set","promise","ok","HttpError","json","searchParams","isArray","index","subvalue","appendToQueryString","subkey","entries","String","isGet","transformedData","URLSearchParams","message","status","statusText","registerExtension","abortable","checkAbortable","onInitialize","saveAbortController","clearAbortController","abort","abortControllers","Map","checkUniqueness","abortPreviousRequest","clearRequest","unique","delete","g","Function","assertType","args","format","anyToString","x","currentErrorHandler","Global","currentWarnHandler","Warning","code","InitEventWasCalledWhileDispatching","FalsyWasAssignedToCancelBubble","TruthyWasAssignedToReturnValue","NonCancelableEventWasCanceled","CanceledInPassiveListener","EventListenerWasDuplicated","OptionWasIgnored","InvalidEventListener","InvalidAttributeHandler","NONE","CAPTURING_PHASE","AT_TARGET","BUBBLING_PHASE","eventInitDict","opts","internalDataMap","composed","stopPropagationFlag","stopImmediatePropagationFlag","canceledFlag","inPassiveListenerFlag","dispatchFlag","timeStamp","now","$","setCancelFlag","WeakMap","retv","getOwnPropertyNames","ErrorCodeMap","INDEX_SIZE_ERR","DOMSTRING_SIZE_ERR","HIERARCHY_REQUEST_ERR","WRONG_DOCUMENT_ERR","INVALID_CHARACTER_ERR","NO_DATA_ALLOWED_ERR","NO_MODIFICATION_ALLOWED_ERR","NOT_FOUND_ERR","NOT_SUPPORTED_ERR","INUSE_ATTRIBUTE_ERR","INVALID_STATE_ERR","SYNTAX_ERR","INVALID_MODIFICATION_ERR","NAMESPACE_ERR","INVALID_ACCESS_ERR","VALIDATION_ERR","TYPE_MISMATCH_ERR","SECURITY_ERR","NETWORK_ERR","ABORT_ERR","URL_MISMATCH_ERR","QUOTA_EXCEEDED_ERR","TIMEOUT_ERR","INVALID_NODE_TYPE_ERR","DATA_CLONE_ERR","defineErrorCodeProperties","obj","EventWrapper","getWrapperClassOf","cancelBubble","stopPropagation","internalDataMap$1","original","defineRedirectDescriptor","$$1","returnValue","wrapperClassCache","wrapper","BaseEventWrapper","originalPrototype","CustomEventWrapper","defineWrapper","isCapture","flags","isPassive","isOnce","isRemoved","invokeCallback","handleEvent","thrownError","maybeError","ErrorEvent","process","emit","reportError","findIndexOfListener","capture","addListener","list","passive","signalListener","removeListener","createListener","cow","removeListenerAt","disableCow","setRemoved","ensureListenerList","listenerMap","attrCallback","attrListener","internalDataMap$2","type0","callback0","options0","$$2","assertCallback","normalizeAddOptions","warnDuplicate","normalizeOptions","wrap","eventData","msg","captureStackTrace","defineProperties","keys$1","getEventAttributeValue","setEventAttributeValue","defineEventAttributeCallback","upsertEventAttributeListener","removeEventAttributeListener","defineEventAttribute","_eventClass","default","defineCustomEventTarget","types","CustomEventTarget","setErrorHandler","setWarningHandler","cachedSetTimeout","cachedClearTimeout","defaultSetTimout","defaultClearTimeout","runTimeout","fun","setTimeout","clearTimeout","currentQueue","queue","draining","queueIndex","cleanUpNextTick","concat","drainQueue","timeout","len","run","marker","runClearTimeout","Item","array","noop","nextTick","browser","env","argv","version","versions","on","off","removeAllListeners","prependListener","prependOnceListener","binding","cwd","chdir","dir","umask"],"mappings":"CAAA,SAA2CA,EAAMC,GAC1B,iBAAZC,SAA0C,iBAAXC,OACxCA,OAAOD,QAAUD,IACQ,mBAAXG,QAAyBA,OAAOC,IAC9CD,OAAO,qBAAsB,GAAIH,GACP,iBAAZC,QACdA,QAA4B,mBAAID,IAEhCD,EAAyB,mBAAIC,IAR/B,CASGK,QAAQ,WACX,O,YCTE,IAAIC,EAAmB,GAGvB,SAASC,EAAoBC,GAG5B,GAAGF,EAAiBE,GACnB,OAAOF,EAAiBE,GAAUP,QAGnC,IAAIC,EAASI,EAAiBE,GAAY,CACzCC,EAAGD,EACHE,GAAG,EACHT,QAAS,IAUV,OANAU,EAAQH,GAAUI,KAAKV,EAAOD,QAASC,EAAQA,EAAOD,QAASM,GAG/DL,EAAOQ,GAAI,EAGJR,EAAOD,QA0Df,OArDAM,EAAoBM,EAAIF,EAGxBJ,EAAoBO,EAAIR,EAGxBC,EAAoBQ,EAAI,SAASd,EAASe,EAAMC,GAC3CV,EAAoBW,EAAEjB,EAASe,IAClCG,OAAOC,eAAenB,EAASe,EAAM,CAAEK,YAAY,EAAMC,IAAKL,KAKhEV,EAAoBgB,EAAI,SAAStB,GACX,oBAAXuB,QAA0BA,OAAOC,aAC1CN,OAAOC,eAAenB,EAASuB,OAAOC,YAAa,CAAEC,MAAO,WAE7DP,OAAOC,eAAenB,EAAS,aAAc,CAAEyB,OAAO,KAQvDnB,EAAoBoB,EAAI,SAASD,EAAOE,GAEvC,GADU,EAAPA,IAAUF,EAAQnB,EAAoBmB,IAC/B,EAAPE,EAAU,OAAOF,EACpB,GAAW,EAAPE,GAA8B,iBAAVF,GAAsBA,GAASA,EAAMG,WAAY,OAAOH,EAChF,IAAII,EAAKX,OAAOY,OAAO,MAGvB,GAFAxB,EAAoBgB,EAAEO,GACtBX,OAAOC,eAAeU,EAAI,UAAW,CAAET,YAAY,EAAMK,MAAOA,IACtD,EAAPE,GAA4B,iBAATF,EAAmB,IAAI,IAAIM,KAAON,EAAOnB,EAAoBQ,EAAEe,EAAIE,EAAK,SAASA,GAAO,OAAON,EAAMM,IAAQC,KAAK,KAAMD,IAC9I,OAAOF,GAIRvB,EAAoB2B,EAAI,SAAShC,GAChC,IAAIe,EAASf,GAAUA,EAAO2B,WAC7B,WAAwB,OAAO3B,EAAgB,SAC/C,WAA8B,OAAOA,GAEtC,OADAK,EAAoBQ,EAAEE,EAAQ,IAAKA,GAC5BA,GAIRV,EAAoBW,EAAI,SAASiB,EAAQC,GAAY,OAAOjB,OAAOkB,UAAUC,eAAe1B,KAAKuB,EAAQC,IAGzG7B,EAAoBgC,EAAI,GAIjBhC,EAAoBA,EAAoBiC,EAAI,G,+BClFrD,gRAAO,IAAMC,EACX,qCACWC,EAAY,2BACZC,EAAuB,8BACvBC,EAAe,eACfC,EAAkB,4BAClBC,EAAe,2BACfC,EAAgB,4BAChBC,EAAsB,IAAIH,EAAe,K,oVCLzCI,EAAsB,SAACvB,GAClC,IAAMwB,EAASC,OAAOzB,GACtB,OAAKyB,OAAOC,MAAMF,GACXxB,EAD2BwB,GA6BvBG,EAAqB,SAACC,G,QACzBC,EAASD,EAAS,KACpBE,EAAiBF,EAAUG,aAC/B,KAEF,GAAIF,GAA2B,OAAnBC,E,IACV,IAAoB,QAAAD,EAAKG,UAA8C,8BAAE,CAApE,IAAMC,EAAK,QACVA,IAAWL,IACbK,EAAMC,SAAWN,EAAUM,UAA2B,WAAfD,EAAME,O,+YC1B/CC,EAAiB,SAACC,GACtB,GDU2B,SAACA,GAC5B,MAAqB,aAAjBA,EAAQF,KACHE,EAAQ/C,KAAKgD,SAAS,MAEP,UAAjBD,EAAQF,MAAoBI,QAAQF,EAAQG,UCd/CC,CAAcJ,GAAU,ODRK,SAACA,G,YAC5BrC,EAAqB,GAC3B,GAAIqC,aAAmBK,kB,IACrB,IAAqB,QAAAL,EAAQM,iBAAe,8BAAE,CAAzC,IAAMC,EAAM,QACf5C,EAAM6C,KAAKtB,EAAoBqB,EAAO5C,S,iGAG1C,GAAI,CAAC,WAAY,SAASsC,SAASD,EAAQF,MAAO,CAChD,IAAMW,EAASC,SAASC,iBACtB,eAAeX,EAAQ/C,KAAI,M,IAE7B,IAAoB,QAAAwD,GAAM,8BAAE,CAAvB,IAAMb,EAAK,QACVA,EAAMgB,SAASjD,EAAM6C,KAAKtB,EAAoBU,EAAMjC,S,kGAG5D,OAAOA,EAAMkD,OAASlD,EAAQ,KCPKmD,CAAoBd,GACvD,GAAqB,aAAjBA,EAAQF,KAAqB,OAAOE,EAAQY,QAChD,IAAMjD,EAAQqC,EAAQrC,MAAMoD,OAC5B,MAAqB,aAAjBf,EAAQF,KAA4BnC,EAC1B,KAAVA,EAAqB,KAClBuB,EAAoBvB,IAuBd,EArCI,SAAC4B,GAClB,IAAMyB,EAAczB,EAAUG,aAAa,KAC3C,OAAIsB,EACKC,KAAKC,MAAMF,GAEb,IAgCM,EApBQ,SACrBxB,EACA2B,G,QAEMC,EAAsB,G,IAC5B,IAAqB,QAAAD,GAAO,8BAAE,CAAzB,IAAME,EAAM,QACTrB,EAAUR,EAAKG,SAAS2B,UAAUD,GACpCrB,IACFoB,EAAKpB,EAAQ/C,MAAQ8C,EAAeC,K,iGAGxC,OAAOoB,GASM,EANW,SAACC,GACzB,OAA8C,OAA9CA,EAAO3B,aAAa,MAKP,EAHc,SAAC2B,GAC5B,OAAAA,EAAOE,aAAa,IAAsB,S,60CCyB7B,EAvDb,SAAmBC,GAAnB,WAMO,KAAAC,eAAiB,SACtBjC,EACAkC,EACAC,GAEA,IAAK,IAAMC,KAAMD,EAAU,CACzB,IAAM3B,EAAUU,SAASmB,eAAeD,GACxC5B,EAAQH,SAAW8B,EAASC,GAAI/B,SAChCG,EAAQ8B,UAAYH,EAASC,GAAIG,QACjCzC,EAAmBU,GAErB,IAAMgC,EAAiB,IAAIC,YAAY,IAAc,CACnDC,OAAQ,CAAE1C,KAAI,EAAEkC,qBAAoB,EAAEC,SAAQ,KAEhD,EAAKH,KAAKW,cAAcH,IAGnB,KAAAI,cAAgB,SACrB5C,EACAkC,EACAW,GAAgB,kBACfC,SAAO,W,4DAER,KADMC,EAAO/C,EAAKE,aAAa,MAE7B,MAAM,IAAI8C,MACR,SAAShD,EAAKoC,GAAE,qDAOO,OAJrBI,EAAkB,IAAIC,YAAY,IAAe,CACrDC,OAAQ,CAAE1C,KAAI,EAAEkC,qBAAoB,EAAEW,QAAO,KAE/CI,KAAKjB,KAAKW,cAAcH,GACG,GAAMS,KAAKjB,KAAKkB,YACzC,OACAH,EACAtB,KAAK0B,UAAUN,GACf,CACEO,MAAO,CACLC,QAAS,CACP,eAAgB,qBAGpBC,SAAS,K,cAVPnB,EAAqB,SAa3Bc,KAAKhB,eAAejC,EAAMkC,EAAsBC,G,YAlDhDc,KAAKjB,KAAOA,G,wpBCSD,EApBH,SACVhC,EACAuD,EACAC,EACA7B,G,YAEM8B,EAAa,G,IACnB,IAAwB,QAAAD,GAAW,8BAAE,CAAhC,IAAMzD,EAAS,QACb4B,EAAQlB,SAASV,EAAUqC,KAAKqB,EAAWzC,KAAKjB,EAAUqC,I,IAC/D,IAAqB,kBAAAsB,EAA0B3D,KAAU,8BAAE,CAAtD,IAAM8B,EAAM,QACV4B,EAAWhD,SAASoB,IAAS4B,EAAWzC,KAAKa,I,oMAGtD,IAAM8B,EAASD,EAA8B1D,EAAM,EAAF,OAC5C2B,IAAO,EACP8B,KAEL,MAAO,CAAEF,QAASA,EAAQnB,GAAIuB,OAAM,I,4SC2CvB,EAtDb,SAAmB3B,GAAnB,WAMO,KAAA4B,aAAe,SACpB/B,EACAF,EACA6B,GAEA,IAAMK,EAAS,CAAC,UACZ,EAAKC,kBAAkBjC,IACzBgC,EAAO7C,KAAK,WAEd6C,EAAOE,SAAQ,SAAAvB,GACb,OAAAX,EAAOmC,iBAAiBxB,EAAG,EAAKyB,aAAatC,EAAS6B,OAExDE,EAAoC7B,IAG/B,KAAAqC,WAAa,SAAC9B,GACnB,OAAAlB,SAASmB,eAAeD,IAEnB,KAAA+B,gBAAkB,WACvB,OAAAC,MAAMC,KAAKnD,SAASC,iBAAiB,OAEhC,KAAA8C,aAAe,SACpBtC,EACA6B,GACG,gBAACc,G,QACEf,EAAUe,EAAMC,OAChBvE,EAAOuD,EAAQvD,K,IACrB,IAAwB,QAAAwD,GAAW,8BAAE,CAAhC,IAAMzD,EAAS,QACZyE,EAAmBd,EAA0B3D,GACnDA,EAAUM,SAAWmE,EAAiB/D,SAAS8C,EAAQnB,K,iGAEzD,IAAMqC,EAAkB,EAAKC,mBAAmB1E,EAAMwD,GACtD,EAAKmB,eAAe/B,cAClB5C,EACAyE,EACAG,EAAgB5E,EAAMuD,EAASkB,EAAiB9C,MAI5C,KAAA+C,mBAAqB,SAC3B1E,EACAwD,GACyB,OAAAA,EAAYqB,QAAO,SAAA5F,GAAK,OAAAA,EAAEe,OAASA,MAEtD,KAAA8D,kBAAoB,SAACjC,GAC3B,OAAC,OAAQ,SAAU,YAAYpB,SAASoB,EAAOvB,OAlD/C2C,KAAK0B,eAAiB,IAAI,EAAe3C,I,4SCF7C,wBAGkB,KAAA8C,WAAa,SAAC9C,GAC5B,EAAK+C,WAAa,IAAI,EAAW/C,GACjCA,EAAKgC,iBAAiB,OAAQ,EAAKgB,MACnChD,EAAKgC,iBAAiB,WAAY,EAAKgB,MACvChD,EAAKiD,eAAejB,iBAAiB,cAAe,EAAKgB,OAG3C,KAAAA,KAAO,W,QACfxB,EAAc,EAAKuB,WAAWZ,kB,IACpC,IAAwB,QAAAX,GAAW,8BAAE,CAAhC,IAAMzD,EAAS,QACZ4B,EAAU+B,EAA0B3D,GAC1C4B,EAAQoC,QAAQ,EAAKmB,WAAWvD,EAAS6B,IACzC1D,EAAmBC,I,mGAIN,KAAAmF,WAAa,SAC5BvD,EACA6B,GACG,gBAACpB,GACJ,IAAMP,EAAS,EAAKkD,WAAWb,WAAW9B,GAC3B,OAAXP,GAAoB6B,EAAiC7B,IACvD,EAAKkD,WAAWnB,aAAa/B,EAAQF,EAAS6B,MAKrC,O,8BCtCf,uBAQI2B,EAAuC,oBAAfC,WAA6BA,WAA+B,oBAAXtI,OAAyBA,YAA2B,IAAXuI,EAAyBA,EAAyB,oBAATC,KAAuBA,KAAO,IAI3L,WACA,SAASC,EAAgBC,EAAUC,GACjC,KAAMD,aAAoBC,GACxB,MAAM,IAAIC,UAAU,qCAIxB,SAASC,EAAkBpB,EAAQqB,GACjC,IAAK,IAAI1I,EAAI,EAAGA,EAAI0I,EAAMvE,OAAQnE,IAAK,CACrC,IAAI2I,EAAaD,EAAM1I,GACvB2I,EAAW/H,WAAa+H,EAAW/H,aAAc,EACjD+H,EAAWC,cAAe,EACtB,UAAWD,IAAYA,EAAWE,UAAW,GACjDnI,OAAOC,eAAe0G,EAAQsB,EAAWpH,IAAKoH,IAIlD,SAASG,EAAaP,EAAaQ,EAAYC,GAG7C,OAFID,GAAYN,EAAkBF,EAAY3G,UAAWmH,GACrDC,GAAaP,EAAkBF,EAAaS,GACzCT,EAGT,SAASU,EAAUC,EAAUC,GAC3B,GAA0B,mBAAfA,GAA4C,OAAfA,EACtC,MAAM,IAAIX,UAAU,sDAGtBU,EAAStH,UAAYlB,OAAOY,OAAO6H,GAAcA,EAAWvH,UAAW,CACrEwH,YAAa,CACXnI,MAAOiI,EACPL,UAAU,EACVD,cAAc,KAGdO,GAAYE,EAAgBH,EAAUC,GAG5C,SAASG,EAAgB7I,GAIvB,OAHA6I,EAAkB5I,OAAO6I,eAAiB7I,OAAO8I,eAAiB,SAAyB/I,GACzF,OAAOA,EAAEgJ,WAAa/I,OAAO8I,eAAe/I,KAEvBA,GAGzB,SAAS4I,EAAgB5I,EAAGqB,GAM1B,OALAuH,EAAkB3I,OAAO6I,gBAAkB,SAAyB9I,EAAGqB,GAErE,OADArB,EAAEgJ,UAAY3H,EACPrB,IAGcA,EAAGqB,GAG5B,SAAS4H,IACP,GAAuB,oBAAZC,UAA4BA,QAAQC,UAAW,OAAO,EACjE,GAAID,QAAQC,UAAUC,KAAM,OAAO,EACnC,GAAqB,mBAAVC,MAAsB,OAAO,EAExC,IAEE,OADAC,KAAKnI,UAAUoI,SAAS7J,KAAKwJ,QAAQC,UAAUG,KAAM,IAAI,iBAClD,EACP,MAAOzE,GACP,OAAO,GAIX,SAAS2E,EAAuB7B,GAC9B,QAAa,IAATA,EACF,MAAM,IAAI8B,eAAe,6DAG3B,OAAO9B,EAGT,SAAS+B,EAA2B/B,EAAMjI,GACxC,OAAIA,GAAyB,iBAATA,GAAqC,mBAATA,EAIzC8J,EAAuB7B,GAHrBjI,EAMX,SAASiK,EAAaC,GACpB,IAAIC,EAA4BZ,IAEhC,OAAO,WACL,IACIa,EADAC,EAAQlB,EAAgBe,GAG5B,GAAIC,EAA2B,CAC7B,IAAIG,EAAYnB,EAAgBvD,MAAMqD,YAEtCmB,EAASZ,QAAQC,UAAUY,EAAOE,UAAWD,QAE7CF,EAASC,EAAMG,MAAM5E,KAAM2E,WAG7B,OAAOP,EAA2BpE,KAAMwE,IAI5C,SAASK,EAAelJ,EAAQC,GAC9B,MAAQjB,OAAOkB,UAAUC,eAAe1B,KAAKuB,EAAQC,IAEpC,QADfD,EAAS4H,EAAgB5H,MAI3B,OAAOA,EAGT,SAASmJ,EAAKxD,EAAQ1F,EAAUmJ,GAkB9B,OAhBED,EADqB,oBAAZlB,SAA2BA,QAAQ9I,IACrC8I,QAAQ9I,IAER,SAAcwG,EAAQ1F,EAAUmJ,GACrC,IAAIC,EAAOH,EAAevD,EAAQ1F,GAElC,GAAKoJ,EAAL,CACA,IAAIC,EAAOtK,OAAOuK,yBAAyBF,EAAMpJ,GAEjD,OAAIqJ,EAAKnK,IACAmK,EAAKnK,IAAIV,KAAK2K,GAGhBE,EAAK/J,SAIJoG,EAAQ1F,EAAUmJ,GAAYzD,GAG5C,IAAI6D,EAAuB,WACzB,SAASA,IACP7C,EAAgBtC,KAAMmF,GAEtBxK,OAAOC,eAAeoF,KAAM,YAAa,CACvC9E,MAAO,GACP4H,UAAU,EACVD,cAAc,IA8DlB,OA1DAE,EAAaoC,EAAS,CAAC,CACrB3J,IAAK,mBACLN,MAAO,SAA0BmC,EAAM+H,EAAU9F,GACzCjC,KAAQ2C,KAAKqF,YACjBrF,KAAKqF,UAAUhI,GAAQ,IAGzB2C,KAAKqF,UAAUhI,GAAMU,KAAK,CACxBqH,SAAUA,EACV9F,QAASA,MAGZ,CACD9D,IAAK,sBACLN,MAAO,SAA6BmC,EAAM+H,GACxC,GAAM/H,KAAQ2C,KAAKqF,UAMnB,IAFA,IAAIC,EAAQtF,KAAKqF,UAAUhI,GAElBpD,EAAI,EAAGC,EAAIoL,EAAMlH,OAAQnE,EAAIC,EAAGD,IACvC,GAAIqL,EAAMrL,GAAGmL,WAAaA,EAExB,YADAE,EAAMC,OAAOtL,EAAG,KAKrB,CACDuB,IAAK,gBACLN,MAAO,SAAuBmG,GAC5B,GAAMA,EAAMhE,QAAQ2C,KAAKqF,UAAzB,CAOA,IAHA,IACIG,EADQxF,KAAKqF,UAAUhE,EAAMhE,MACToI,QAEfxL,EAAI,EAAGC,EAAIsL,EAAYpH,OAAQnE,EAAIC,EAAGD,IAAK,CAClD,IAAIyL,EAAWF,EAAYvL,GAE3B,IACEyL,EAASN,SAAShL,KAAK4F,KAAMqB,GAC7B,MAAO9B,GACPM,QAAQ8F,UAAUC,MAAK,WACrB,MAAMrG,KAINmG,EAASpG,SAAWoG,EAASpG,QAAQuG,MACvC7F,KAAK8F,oBAAoBzE,EAAMhE,KAAMqI,EAASN,UAIlD,OAAQ/D,EAAM0E,sBAIXZ,EArEkB,GAwEvBa,EAA2B,SAAUC,GACvC/C,EAAU8C,EAAaC,GAEvB,IAAIC,EAAS7B,EAAa2B,GAE1B,SAASA,IACP,IAAIG,EA2BJ,OAzBA7D,EAAgBtC,KAAMgG,IAEtBG,EAAQD,EAAO9L,KAAK4F,OAOTqF,WACTF,EAAQ/K,KAAK8J,EAAuBiC,IAKtCxL,OAAOC,eAAesJ,EAAuBiC,GAAQ,UAAW,CAC9DjL,OAAO,EACP4H,UAAU,EACVD,cAAc,IAEhBlI,OAAOC,eAAesJ,EAAuBiC,GAAQ,UAAW,CAC9DjL,MAAO,KACP4H,UAAU,EACVD,cAAc,IAETsD,EAuBT,OApBApD,EAAaiD,EAAa,CAAC,CACzBxK,IAAK,WACLN,MAAO,WACL,MAAO,yBAER,CACDM,IAAK,gBACLN,MAAO,SAAuBmG,GACT,UAAfA,EAAMhE,OACR2C,KAAKoG,SAAU,EAEa,mBAAjBpG,KAAKqG,SACdrG,KAAKqG,QAAQjM,KAAK4F,KAAMqB,IAI5ByD,EAAKvB,EAAgByC,EAAYnK,WAAY,gBAAiBmE,MAAM5F,KAAK4F,KAAMqB,OAI5E2E,EAxDsB,CAyD7Bb,GACEmB,EAA+B,WACjC,SAASA,IACPhE,EAAgBtC,KAAMsG,GAItB3L,OAAOC,eAAeoF,KAAM,SAAU,CACpC9E,MAAO,IAAI8K,EACXlD,UAAU,EACVD,cAAc,IAyClB,OArCAE,EAAauD,EAAiB,CAAC,CAC7B9K,IAAK,QACLN,MAAO,WACL,IAAImG,EAEJ,IACEA,EAAQ,IAAIkF,MAAM,SAClB,MAAOhH,GACiB,oBAAbtB,SACJA,SAASuI,aAMZnF,EAAQpD,SAASuI,YAAY,UACvBC,UAAU,SAAS,GAAO,IALhCpF,EAAQpD,SAASyI,qBACXrJ,KAAO,QAQfgE,EAAQ,CACNhE,KAAM,QACNsJ,SAAS,EACTC,YAAY,GAKlB5G,KAAK6G,OAAOnH,cAAc2B,KAE3B,CACD7F,IAAK,WACLN,MAAO,WACL,MAAO,+BAIJoL,EAlD0B,GA4DnC,SAASQ,EAAezE,GACtB,OAAIA,EAAK0E,0CACPC,QAAQC,IAAI,sFACL,GAUsB,mBAAjB5E,EAAK6E,UAA2B7E,EAAK6E,QAAQrL,UAAUC,eAAe,YAAcuG,EAAKiE,gBAiBzG,SAASa,EAAwBC,GAC3B,mBAAsBA,IACxBA,EAAe,CACbjH,MAAOiH,IAIX,IAAIC,EAAgBD,EAChBjH,EAAQkH,EAAclH,MACtBmH,EAAwBD,EAAcH,QACtCK,OAA0C,IAA1BD,EAAmCnH,EAAM+G,QAAUI,EACnEE,EAAwBH,EAAcf,gBACtCmB,EAAwBJ,EAAcN,yCACtCA,OAAqE,IAA1BU,GAA2CA,EAE1F,IAAKX,EAAe,CAClB3G,MAAOA,EACP+G,QAASK,EACTjB,gBAAiBkB,EACjBT,yCAA0CA,IAE1C,MAAO,CACL5G,MAAOA,EACP+G,QAASA,GAIb,IAAIA,EAAUK,GAYVL,IAAYA,EAAQrL,UAAUC,eAAe,WAAaiL,MAC5DG,EAAU,SAAiB/J,EAAOuK,GAChC,IAAIb,EAEAa,GAAQA,EAAKb,SACfA,EAASa,EAAKb,cAOPa,EAAKb,QAGd,IAAIjH,EAAU,IAAI2H,EAAcpK,EAAOuK,GAWvC,OATIb,GACFlM,OAAOC,eAAegF,EAAS,SAAU,CACvCkD,UAAU,EACVjI,YAAY,EACZgI,cAAc,EACd3H,MAAO2L,IAIJjH,IAGD/D,UAAY0L,EAAc1L,WAGpC,IAAI8L,EAAYxH,EAgDhB,MAAO,CACLA,MA/CmB,SAAwBhD,EAAOuK,GAClD,IAAIb,EAASK,GAAWA,EAAQrL,UAAU+L,cAAczK,GAASA,EAAM0J,OAASa,EAAOA,EAAKb,YAASgB,EAErG,GAAIhB,EAAQ,CACV,IAAIiB,EAEJ,IACEA,EAAa,IAAIC,aAAa,UAAW,cACzC,MAAOC,IAGPF,EAAa,IAAI/H,MAAM,YACZvF,KAAO,aAIpB,GAAIqM,EAAOT,QACT,OAAOvG,QAAQoI,OAAOH,GAIxB,IAAII,EAAe,IAAIrI,SAAQ,SAAUsI,EAAGF,GAC1CpB,EAAO9F,iBAAiB,SAAS,WAC/B,OAAOkH,EAAOH,KACb,CACDjC,MAAM,OAeV,OAXI6B,GAAQA,EAAKb,eAORa,EAAKb,OAIPhH,QAAQuI,KAAK,CAACF,EAAcP,EAAUxK,EAAOuK,KAGtD,OAAOC,EAAUxK,EAAOuK,IAKxBR,QAASA,GA9JS,oBAAXlM,QAA0BA,OAAOC,cAG1CqL,EAAgBzK,UAAUb,OAAOC,aAAe,kBAChD+K,EAAYnK,UAAUb,OAAOC,aAAe,eA8J9C,SAAWoH,GAET,GAAKyE,EAAezE,GAIpB,GAAKA,EAAKlC,MAAV,CAKA,IAAIkI,EAAkBlB,EAAwB9E,GAC1ClC,EAAQkI,EAAgBlI,MACxB+G,EAAUmB,EAAgBnB,QAE9B7E,EAAKlC,MAAQA,EACbkC,EAAK6E,QAAUA,EACfvM,OAAOC,eAAeyH,EAAM,kBAAmB,CAC7CS,UAAU,EACVjI,YAAY,EACZgI,cAAc,EACd3H,MAAOoL,IAET3L,OAAOC,eAAeyH,EAAM,cAAe,CACzCS,UAAU,EACVjI,YAAY,EACZgI,cAAc,EACd3H,MAAO8K,SApBPgB,QAAQsB,KAAK,qEAPjB,CA6BmB,oBAATjG,KAAuBA,KAAOH,GA3fxC1I,GAigBF,IACE,IAAIK,OAAO0O,YACX,MAAOC,GACP3O,OAAO0O,YAAc,cAGvB,MAAME,UAAuB1I,OAE7B,MAAM2I,EAAS,CAACC,EAAWC,KACvB,IAAKD,EAAW,CAEZ,MAAM,IAAIF,EADM,yBAAmCZ,IAAhBe,EAA4B,KAAKA,IAAgB,QAK5F,MAAMC,UAAkBN,YACpB,YAAYxJ,GACR+J,QACA9I,KAAKjB,KAAOA,EACZiB,KAAK+I,SAAW,QAChB/I,KAAKgJ,eAAiB,CAACnP,OAAOoP,SAASC,QACvClJ,KAAKmJ,QAAUnJ,KAAKoJ,SAAS3N,KAAKuE,MAClCjB,EAAKgC,iBAAiB,OAAQf,KAAK6B,WAAWpG,KAAKuE,OAEvD,aACIA,KAAKqJ,OAAOxP,OAAOoE,SAASqL,MAC5BtJ,KAAKjB,KAAKiD,eAAejB,iBAAiB,eAAgBM,IACtD,MAAM,QAAEkI,GAAYlI,EAAM5B,OAC1BO,KAAKqJ,OAAOE,MAGpB,OAAOhM,GACH,MAAMiM,EAAY,CACd,IAAIxJ,KAAK+I,WACT,uBAAuB/I,KAAK+I,WAC5B,sBAAsB/I,KAAK+I,WAC3B,wBAAwB/I,KAAK+I,WAC7B,OAAO/I,KAAK+I,gCACZ,OAAO/I,KAAK+I,+BACZ,OAAO/I,KAAK+I,kCACdU,KAAK,MACDC,EAAenM,IACjBA,EAAQuI,oBAAoB,QAAS9F,KAAKmJ,SAC1C5L,EAAQwD,iBAAiB,QAASf,KAAKmJ,UAErCjM,EAAWK,EAAQW,iBAAiBsL,GAC1C,IAAK,IAAIvP,EAAI,EAAGA,EAAIiD,EAASkB,OAAQnE,IACjCyP,EAAYxM,EAASyM,KAAK1P,IAE1BsD,EAAQqM,QAAQJ,IAChBE,EAAYnM,GAEhB,MAAMsM,EAAY9M,IACdA,EAAK+I,oBAAoB,SAAU9F,KAAKmJ,SACxCpM,EAAKgE,iBAAiB,SAAUf,KAAKmJ,UAErC5L,EAAQqM,QAAQ,OAAO5J,KAAK+I,aAC5Bc,EAAStM,GAEb,MAAMuM,EAAQvM,EAAQW,iBAAiB,OAAO8B,KAAK+I,YACnD,IAAK,IAAI9O,EAAI,EAAGA,EAAI6P,EAAM1L,OAAQnE,IAC9B4P,EAASC,EAAMH,KAAK1P,IAG5B,SAASoH,GACL,MAAM0I,EAAa1I,EACnB,GAAI0I,EAAWC,QAAUD,EAAWE,SAAWF,EAAWG,UAAYH,EAAWI,SAAWJ,EAAWK,OACnG,OAEJ,MAAM7M,EAAU8D,EAAMgJ,cAChB/K,EAAU,GACVgL,EAAe,OAIF,WAAfjJ,EAAMhE,KACN2C,KAAKuK,WAAWhN,EAAS+B,EAAS+B,GAAOmJ,MAAMF,GAE3B,UAAfjJ,EAAMhE,MACX2C,KAAKyK,aAAalN,EAAS+B,EAASyK,GAAYS,MAAMF,GAG9D,mBAAmB/M,EAAS+B,EAAU,GAAI+B,GACtC,IAAIqJ,EAAIC,EAAIC,EAAIC,EAAIC,EAAIC,EACxB,IAA8BpM,EAA1BqM,EAAS,MAAOC,EAAM,GAC1B,IAAKjL,KAAKN,cAAc,IAAIF,YAAY,cAAe,CAAEoH,YAAY,EAAMnH,OAAQ,CAAElC,UAAS2N,cAAe7J,EAAO/B,cAEhH,OADA+B,SAA8CA,EAAM8J,iBAC7C,GAEX,GAAwB,MAApB5N,EAAQ6N,QACR1C,EAAOnL,aAAmB8N,mBAC1BL,EAAS,MACTC,EAAM1N,EAAQ+N,KACd3M,EAAO,UAEN,GAAwB,UAApBpB,EAAQ6N,SAA2C,WAApB7N,EAAQ6N,QAAsB,CAClE1C,EAAOnL,aAAmBgO,kBAAoBhO,aAAmBiO,mBACjE,MAAM,KAAEzO,GAASQ,EAKjB,GAHAyN,EAAiS,QAAvRH,EAAgH,QAA1GF,EAAmD,QAA7CD,EAAKnN,EAAQN,aAAa,qBAAkC,IAAPyN,OAAgB,EAASA,EAAGe,qBAAkC,IAAPd,EAAgBA,EAAwF,QAAlFC,EAAK7N,aAAmC,EAASA,EAAKE,aAAa,iBAA8B,IAAP2N,OAAgB,EAASA,EAAGa,qBAAkC,IAAPZ,EAAgBA,EAAK,MAC9TI,EAAoK,QAA7JF,EAAmD,QAA7CD,EAAKvN,EAAQN,aAAa,qBAAkC,IAAP6N,EAAgBA,EAAK/N,aAAmC,EAASA,EAAKE,aAAa,iBAA8B,IAAP8N,EAAgBA,EAAKlR,OAAOoP,SAASyC,SAAW7R,OAAOoP,SAAS0C,OAC5OhN,EAAO,IAAIiN,SAAS7O,QAAmCA,OAAO8K,GACzC,WAAjBtK,EAAQF,MAAyC,WAApBE,EAAQ6N,QACrCzM,EAAKkN,OAAOtO,EAAQ/C,KAAM+C,EAAQrC,OAAS,SAE1C,GAAqB,UAAjBqC,EAAQF,KAAkB,CAC/B,MAAMyO,EAASvO,EAAQwO,wBACvBpN,EAAKkN,OAAO,GAAGtO,EAAQ/C,SAAUwR,KAAKC,IAAI,EAAGD,KAAKE,WAAgBrE,IAAVxG,EAAsBA,EAAM8K,MAAQL,EAAOM,KAAO,KAC1GzN,EAAKkN,OAAO,GAAGtO,EAAQ/C,SAAUwR,KAAKC,IAAI,EAAGD,KAAKE,WAAgBrE,IAAVxG,EAAsBA,EAAMgL,MAAQP,EAAOQ,IAAM,MAGjH,IAAKtM,KAAKuM,aAAatB,GACnB,MAAM,IAAIlL,MAAM,sDAAsDkL,KAG1E,OADA5J,SAA8CA,EAAM8J,iBAC7CnL,KAAKjB,KAAKkB,YAAY+K,EAAQC,EAAKtM,EAAMW,GAEpD,iBAAiBvC,EAAMuC,EAAU,GAAI+B,GACjC,IAAIqJ,EAAIC,EAAIC,EACZ,IAAK5K,KAAKN,cAAc,IAAIF,YAAY,cAAe,CAAEoH,YAAY,EAAMnH,OAAQ,CAAElC,QAASR,EAAMmO,cAAe7J,EAAO/B,cAEtH,OADA+B,SAA8CA,EAAM8J,iBAC7C,GAEX,MAAMH,EAA6G,QAAnGL,EAA4C,QAAtCD,EAAK3N,EAAKE,aAAa,iBAA8B,IAAPyN,OAAgB,EAASA,EAAGe,qBAAkC,IAAPd,EAAgBA,EAAK,MAC1IM,EAA6C,QAAtCL,EAAK7N,EAAKE,aAAa,iBAA8B,IAAP2N,EAAgBA,EAAK/Q,OAAOoP,SAASyC,SAAW7R,OAAOoP,SAAS0C,OACrHhN,EAAO,IAAIiN,SAAS7O,GAC1B,IAAKiD,KAAKuM,aAAatB,GACnB,MAAM,IAAIlL,MAAM,sDAAsDkL,KAG1E,OADA5J,SAA8CA,EAAM8J,iBAC7CnL,KAAKjB,KAAKkB,YAAY+K,EAAQC,EAAKtM,EAAMW,GAEpD,aAAa2L,GACT,MAAMuB,EAAY,IAAIC,IAAIxB,EAAKhC,SAASqC,MAExC,MAAyB,SAArBkB,EAAUtD,QAGPlJ,KAAKgJ,eAAexL,SAASgP,EAAUtD,SAItD,MAAMwD,EACF,YAAY3N,GACRiB,KAAKjB,KAAOA,EACZA,EAAKgC,iBAAiB,OAAQf,KAAK6B,WAAWpG,KAAKuE,OACnDjB,EAAK4N,UAAU5L,iBAAiB,cAAef,KAAK4M,YAAYnR,KAAKuE,OAEzE,aACIA,KAAK6M,UAAUhT,OAAOoE,SAASqL,MAC/BtJ,KAAKjB,KAAKiD,eAAejB,iBAAiB,eAAgBM,IACtD,MAAM,QAAEkI,GAAYlI,EAAM5B,OAC1BO,KAAK6M,UAAUtD,MAGvB,UAAUhM,GACN,MAAMuP,EAAa9M,KAAK8M,YAAcjT,OAAOkT,MAC7C,GAAID,EAAY,CACY,SAApBvP,EAAQ6N,SACR0B,EAAWE,SAASzP,GAExB,MAAMuM,EAAQvM,EAAQW,iBAAiB,QACvC,IAAK,IAAIjE,EAAI,EAAGA,EAAI6P,EAAM1L,OAAQnE,IAC9B6S,EAAWE,SAASlD,EAAMH,KAAK1P,KAI3C,YAAYoH,GACR,MAAM,QAAE9D,EAAO,cAAE2N,GAAkB7J,EAAM5B,OACnCwN,EAAe1P,OACKsK,IAAtBoF,EAAalQ,MAA4C,OAAtBkQ,EAAalQ,OAChDkQ,EAAalQ,KAAK,qBAAuBQ,GAE7C,MAAMuP,EAAa9M,KAAK8M,YAAcjT,OAAOkT,MACpB,SAApBxP,EAAQ6N,UAAsB7N,EAAQR,OAAS+P,GAAeA,EAAWI,aAAa3P,KACnF2N,IACAA,EAAciC,2BACdjC,EAAcC,kBAElB9J,EAAM8J,mBAKlB,MAAMiC,UAAwB7E,YAC1B,YAAYxJ,GACR+J,QACA9I,KAAKjB,KAAOA,EACZA,EAAK4N,UAAU5L,iBAAiB,eAAgBM,IAC5C,IAAIqJ,EAAIC,EAAIC,EACZ,MAAM,QAAErN,EAAO,QAAE+B,GAAY+B,EAAM5B,OACnC,GAAKlC,IAGDA,EAAQ8P,aAAa,8BAAwD,QAAvB3C,EAAKnN,EAAQR,YAAyB,IAAP2N,OAAgB,EAASA,EAAG2C,aAAa,8BAA8B,CAC5J,MAAMnS,EAAoE,QAA3DyP,EAAKpN,EAAQN,aAAa,mCAAgD,IAAP0N,EAAgBA,EAA6B,QAAvBC,EAAKrN,EAAQR,YAAyB,IAAP6N,OAAgB,EAASA,EAAG3N,aAAa,4BAChLqC,EAAQgO,cAA0B,QAAVpS,MAGhC6D,EAAKgC,iBAAiB,WAAYM,IAC9B,IAAIqJ,EACJ,MAAM,QAAE6C,EAAO,QAAEjO,GAAY+B,EAAM5B,OAC/B8N,EAAQC,WACRxN,KAAKyN,aAAaF,EAAQC,SAA2C,QAAhC9C,EAAKpL,EAAQgO,qBAAkC,IAAP5C,GAAgBA,EAAYpL,GACzG+B,EAAM8L,+BAGdnN,KAAK0N,gBAAkB,CACnBC,OAAS1C,GAAQpR,OAAOoP,SAAS0E,OAAO1C,IAGhD,aAAaA,EAAK2C,EAAOtO,EAAU,IAC3B2L,aAAewB,MACfxB,EAAMA,EAAIK,MAEd,IAAIuC,EAAiBD,IAAU5N,KAAKjB,KAAK4N,UAAUJ,aAAatB,GAC5CjL,KAAKN,cAAc,IAAIF,YAAY,WAAY,CAC/DoH,YAAY,EACZnH,OAAQ,CACJwL,MACA4C,iBACA,gBAAgB3S,GACZ2S,IAAmB3S,GAEvBoE,gBAMJuO,EACA7N,KAAK0N,gBAAgBC,OAAO1C,GAG5BjL,KAAKjB,KAAKkB,YAAY,MAAOgL,EAAK,KAAM3L,KAKpD,MAAMwO,UAAuBvF,YACzB,YAAYxJ,GACR+J,QACA9I,KAAKjB,KAAOA,EACZiB,KAAK+N,GAAK,CACNC,QAAS,CAACzE,EAAS0E,KACf1E,EAAQlK,UAAY4O,GAExBC,QAAS,CAAC3E,EAAS0E,IAAY1E,EAAQ4E,mBAAmB,aAAcF,GACxEpC,OAAQ,CAACtC,EAAS0E,IAAY1E,EAAQ4E,mBAAmB,YAAaF,IAE1ElP,EAAKgC,iBAAiB,WAAYM,IAC9B,MAAM,QAAE/B,EAAO,QAAEiO,GAAYlM,EAAM5B,OAC/B8N,EAAQa,UACRpO,KAAKqO,eAAed,EAAQa,UAAU,EAAO9O,MAIzD,eAAe8O,EAAUE,GAAY,EAAOhP,EAAU,IAClD3E,OAAO4T,KAAKH,GAAUtN,SAAS3B,IAC3B,MAAMoK,EAAUtL,SAASmB,eAAeD,GACpCoK,GACAvJ,KAAKwO,cAAcjF,EAAS6E,EAASjP,GAAKmP,EAAWhP,MAIjE,cAAciK,EAAS0E,EAASK,EAAWhP,GACvC,IAAImP,EAAYzO,KAAK+N,GAAGC,SACnBzE,EAAQ8D,aAAa,+BAAgC9D,EAAQ8D,aAAa,sBAA0BiB,GAG/F/E,EAAQ8D,aAAa,8BAA+B9D,EAAQ8D,aAAa,qBAAyBiB,IACxGG,EAAYzO,KAAK+N,GAAGlC,QAHpB4C,EAAYzO,KAAK+N,GAAGG,QAKNlO,KAAKN,cAAc,IAAIF,YAAY,eAAgB,CACjEoH,YAAY,EACZnH,OAAQ,CACJ8J,UACA0E,UACAK,YACAG,YACA,gBAAgBvT,GACZuT,EAAYvT,GAEhBoE,gBAM8B,UAAlCiK,EAAQ6B,QAAQsD,cAChBzQ,SAAS0Q,MAAQV,EAGjBQ,EAAUlF,EAAS0E,GAEvBjO,KAAKN,cAAc,IAAIF,YAAY,cAAe,CAC9CoH,YAAY,EACZnH,OAAQ,CACJ8J,UACA0E,UACAK,YACAG,YACAnP,gBAMhB,MAAMsP,EACF,YAAY7P,GACRiB,KAAKjB,KAAOA,EACZiB,KAAKsL,KAAO,KACZtL,KAAK6O,gBAAkB7O,KAAK8O,eAAerT,KAAKuE,MAChDA,KAAK+O,SAAU,EACfhQ,EAAKgC,iBAAiB,OAAQf,KAAK6B,WAAWpG,KAAKuE,OACnDjB,EAAKgC,iBAAiB,SAAUf,KAAKgP,QAAQvT,KAAKuE,OAClDjB,EAAKgC,iBAAiB,UAAWf,KAAKiP,aAAaxT,KAAKuE,OACxDjB,EAAK4N,UAAU5L,iBAAiB,cAAef,KAAKkP,cAAczT,KAAKuE,OACvEA,KAAKmP,eAAiB,CAClBC,aAAc,CAACzQ,EAAMgQ,EAAO1D,IAAQpR,OAAOwG,QAAQ+O,aAAazQ,EAAMgQ,EAAO1D,GAC7EoE,UAAW,CAAC1Q,EAAMgQ,EAAO1D,IAAQpR,OAAOwG,QAAQgP,UAAU1Q,EAAMgQ,EAAO1D,IAG/E,WAAW5J,GACP,MAAM,eAAEiO,GAAmBjO,EAAM5B,OAC7B,mBAAoB6P,QAAoDzH,IAAlCyH,EAAeC,iBACrDvP,KAAK+O,QAAUO,EAAeC,gBAElC1V,OAAOkH,iBAAiB,WAAYf,KAAK6O,iBACzC7O,KAAKmP,eAAeC,aAAapP,KAAKwP,WAAW3V,OAAOoP,SAASqC,KAAMtL,KAAK+O,SAAUlV,OAAOoE,SAAS0Q,MAAO9U,OAAOoP,SAASqC,MAEjI,eAAe/L,GACNA,EAAEkQ,QAGHlQ,EAAEkQ,MAAMC,IACR1P,KAAK2P,eAAepQ,EAAEkQ,MAAMC,IAC5B1P,KAAK4P,YAAYrQ,EAAEkQ,MAAMd,SAEL,IAAfpP,EAAEkQ,MAAMC,IACb1P,KAAKjB,KAAKkB,YAAY,MAAOV,EAAEkQ,MAAMnE,KAAM,KAAM,CAC7CjL,SAAS,EACTkP,gBAAgB,KAI5B,QAAQlO,GACJ,MAAM,IAAE4J,GAAQ5J,EAAM5B,OACtBO,KAAKsL,KAAOL,EAEhB,cAAc5J,GACV,IAAIqJ,EAAIC,EAAIC,EAAIC,EAAIC,EAAIC,EACxB,MAAM,QAAExN,EAAO,QAAE+B,GAAY+B,EAAM5B,OAEnC,GAAKlC,EAAL,CAGA,GAAIA,EAAQ8P,aAAa,uBAAiD,QAAvB3C,EAAKnN,EAAQR,YAAyB,IAAP2N,OAAgB,EAASA,EAAG2C,aAAa,sBAAuB,CAC9I,MAAMnS,EAA6D,QAApDyP,EAAKpN,EAAQN,aAAa,4BAAyC,IAAP0N,EAAgBA,EAA6B,QAAvBC,EAAKrN,EAAQR,YAAyB,IAAP6N,OAAgB,EAASA,EAAG3N,aAAa,qBACzKqC,EAAQe,QAAUuO,EAAeiB,cAAc3U,GAEnD,GAAIqC,EAAQ8P,aAAa,6BAAuD,QAAvBxC,EAAKtN,EAAQR,YAAyB,IAAP8N,OAAgB,EAASA,EAAGwC,aAAa,8BAA+B,CAC5J,MAAMnS,EAAmE,QAA1D4P,EAAKvN,EAAQN,aAAa,kCAA+C,IAAP6N,EAAgBA,EAA6B,QAAvBC,EAAKxN,EAAQR,YAAyB,IAAPgO,OAAgB,EAASA,EAAG9N,aAAa,2BAC/KqC,EAAQiQ,eAA2B,QAAVrU,IAGjC,qBAAqBE,GACjB,MAAa,QAATA,IAA2B,IAATA,IAGJ,YAATA,GACE,WAIf,aAAaiG,GACT,MAAM,QAAEkM,EAAO,QAAEjO,GAAY+B,EAAM5B,OAC7BrE,EAAOwT,EAAeiB,cAAcvQ,EAAQe,SAClD,IAAa,IAATjF,EACA,OAEAmS,EAAQuC,SAAWvC,EAAQtC,MAC3BjL,KAAKsL,KAAOiC,EAAQtC,KAExB,MAAMD,EAAkB,YAAT5P,EAAqB,eAAiB,YAC/C2T,GAAqC,IAA3BzP,EAAQiQ,iBAAuD,IAA3BjQ,EAAQiQ,gBAA4BvP,KAAK+O,QAC7F/O,KAAKmP,eAAenE,GAAQhL,KAAKwP,WAAWxP,KAAKsL,KAAMyD,GAAUlV,OAAOoE,SAAS0Q,MAAO3O,KAAKsL,MAC7FtL,KAAKsL,KAAO,KAEhB,WAAWA,EAAMyD,GACb,MAAMU,EAAQ,CACVnE,QASJ,OAPIyD,GACAU,EAAMd,MAAQ9U,OAAOoE,SAAS0Q,MAC9Bc,EAAMC,GAAK1P,KAAK+P,gBAGhBN,EAAMC,IAAK,EAERD,EAEX,eACI,MAAMjL,EAAS,GACT4J,EAAWvU,OAAOoE,SAASC,iBAAiB,oBAClD,IAAK,IAAIjE,EAAI,EAAGA,EAAImU,EAAShQ,OAAQnE,IAAK,CACtC,MAAMsP,EAAU6E,EAASzE,KAAK1P,GACzBsP,EAAQ8D,aAAa,8BAAiC9D,EAAQ8D,aAAa,0BAC5E7I,EAAO+E,EAAQpK,IAAMoK,EAAQlK,WAGrC,OAAOmF,EAEX,eAAe4J,GACXpO,KAAKjB,KAAKiD,eAAeqM,eAAeD,GAAU,GAClDpO,KAAKjB,KAAKiR,aAAaC,YAAY7B,GAEvC,YAAYO,GACR9U,OAAOoE,SAAS0Q,MAAQA,GAIhC,MAAMuB,EACF,YAAYnR,GACRA,EAAKgC,iBAAiB,WAAYM,IAC9B,MAAM,QAAEkM,GAAYlM,EAAM5B,OACtB8N,EAAQa,UACRpO,KAAKiQ,YAAY1C,EAAQa,aAIrC,YAAYA,GACRzT,OAAO4T,KAAKH,GAAUtN,SAAS3B,IAC3B,MAAM8O,EAAUG,EAASjP,GACzB,IAAK,WAAWgR,KAAKlC,GACjB,OAEJ,MAAMmC,EAAKvW,OAAOoE,SAASoS,cAAc,OACzCD,EAAG/Q,UAAY4O,EACf,MAAMqC,EAAUF,EAAGlS,iBAAiB,UACpC,IAAK,IAAIjE,EAAI,EAAGA,EAAIqW,EAAQlS,OAAQnE,IAAK,CACrC,MAAMsW,EAASD,EAAQ3G,KAAK1P,GACtBuW,EAAW3W,OAAOoE,SAASoS,cAAc,UAE/C,GADAG,EAASnR,UAAYkR,EAAOlR,UACxBkR,EAAOE,gBAAiB,CACxB,MAAMC,EAAQH,EAAOI,WACrB,IAAK,IAAIC,EAAI,EAAGA,EAAIF,EAAMtS,OAAQwS,IAAK,CACnC,MAAMC,EAAWH,EAAME,GAAGpW,KAC1BgW,EAAS1R,aAAa+R,EAAUH,EAAME,GAAG1V,QAGjDrB,OAAOoE,SAAS6S,KAAKC,YAAYP,GAC5BQ,WAAWC,YAAYT,QAM5C,MAAMU,UAAa3I,YACf,YAAYoE,EAAWwE,EAAiBnP,EAAgBoP,EAAcC,EAAgBrB,GAClFlH,QACA9I,KAAKsR,QAAU,EACftR,KAAKuR,aAAc,EACnBvR,KAAKwR,WAAa,GAClBxR,KAAKsP,eAAiB,GACtBtP,KAAK2M,UAAYA,EAAY,IAAIA,EAAU3M,MAAQ,IAAI6I,EAAU7I,MACjEA,KAAKmR,gBAAkBA,EAAkB,IAAIA,EAAgBnR,MAAQ,IAAIoN,EAAgBpN,MACzFA,KAAKgC,eAAiBA,EAAiB,IAAIA,EAAehC,MAAQ,IAAI8N,EAAe9N,MACrFA,KAAKoR,aAAeA,EAAe,IAAIA,EAAapR,MAAQ,IAAI0M,EAAa1M,MAC7EA,KAAKqR,eAAiBA,EAAiB,IAAIA,EAAerR,MAAQ,IAAI4O,EAAe5O,MACrFA,KAAKgQ,aAAeA,EAAe,IAAIA,EAAahQ,MAAQ,IAAIkQ,EAAalQ,MAEjF,kBAAkByR,GACVzR,KAAKuR,aACLE,EAAU5P,WAAW7B,MAEzBA,KAAKwR,WAAWzT,KAAK0T,GAEzB,WAAWnC,EAAiB,IACxB,GAAItP,KAAKuR,YACL,MAAM,IAAIxR,MAAM,sDAEpBC,KAAKsP,eAAiBA,EACtBtP,KAAKwR,WAAW1Q,SAAS2Q,GAAcA,EAAU5P,WAAW7B,QAC5DA,KAAKN,cAAc,IAAIF,YAAY,OAAQ,CAAEC,OAAQ,CAAE6P,qBACvDtP,KAAKuR,aAAc,EAEvB,kBAAkBvG,EAAQC,EAAKtM,EAAO,KAAMW,EAAU,IAE/B,iBAAR2L,IACPA,EAAM,IAAIwB,IAAIxB,EAAKhC,SAASqC,OAEhChM,EAAU3E,OAAOgT,OAAOhT,OAAOgT,OAAOhT,OAAOgT,OAAO,GAAI3N,KAAKsP,gBAAiBhQ,GAAU,CAAEa,MAAOxF,OAAOgT,OAAOhT,OAAOgT,OAAO,GAAI3N,KAAKsP,eAAenP,OAAS,IAAKb,EAAQa,OAAS,MACpL,MAAMC,EAAU,IAAIsR,QAAQpS,EAAQa,MAAMC,SAAW,IAC/CkJ,EAAOtJ,KAAK2R,cAAc1G,EAAKD,EAAQrM,GACvCiT,EAAkB,IAAItL,gBACtB1G,EAAU,IAAIsH,QAAQ+D,EAAIhH,WAAYtJ,OAAOgT,OAAOhT,OAAOgT,OAAO,CAAEkE,YAAa,eAAiBvS,EAAQa,OAAQ,CAAE6K,SACtH5K,UACAkJ,OAAMzC,OAAQ+K,EAAgB/K,UAGlC,GADAjH,EAAQQ,QAAQ0R,IAAI,mBAAoB,mBACnC9R,KAAKN,cAAc,IAAIF,YAAY,SAAU,CAAEoH,YAAY,EAAMnH,OAAQ,CAAEG,UAASoL,SAAQC,IAAKA,EAAIhH,WAAYtF,OAAMW,cACxH,MAAO,GAEX,MAAMyS,EAAUlY,OAAOsG,MAAMP,GAE7B,IAAIV,EAAUqO,EADdvN,KAAKN,cAAc,IAAIF,YAAY,QAAS,CAAEC,OAAQ,CAAEG,UAASmS,UAASH,kBAAiBtS,cAE3F,IAEI,GADAJ,QAAiB6S,GACZ7S,EAAS8S,GACV,MAAM,IAAIC,EAAU/S,GAExBqO,QAAgBrO,EAASgT,OAE7B,MAAO1J,GACH,GAAmB,eAAfA,EAAMhO,KAGN,OAFAwF,KAAKN,cAAc,IAAIF,YAAY,QAAS,CAAEC,OAAQ,CAAEG,UAAS4I,QAAOlJ,cACxEU,KAAKN,cAAc,IAAIF,YAAY,WAAY,CAAEC,OAAQ,CAAEG,UAASV,WAAUqO,aAAS1F,EAAWW,QAAOlJ,cAClG,GAIX,MAFAU,KAAKN,cAAc,IAAIF,YAAY,QAAS,CAAEC,OAAQ,CAAEG,UAASV,WAAUsJ,QAAOlJ,cAClFU,KAAKN,cAAc,IAAIF,YAAY,WAAY,CAAEC,OAAQ,CAAEG,UAASV,WAAUqO,aAAS1F,EAAWW,QAAOlJ,cACnGkJ,EAIV,OAFAxI,KAAKN,cAAc,IAAIF,YAAY,UAAW,CAAEC,OAAQ,CAAEG,UAASV,WAAUqO,UAASjO,cACtFU,KAAKN,cAAc,IAAIF,YAAY,WAAY,CAAEC,OAAQ,CAAEG,UAASV,WAAUqO,UAAS/E,WAAOX,EAAWvI,cAClGiO,EAEX,oBAAoB4E,EAAc3W,EAAKN,GACnC,GAAIA,QAGJ,GAAIiG,MAAMiR,QAAQlX,GAAQ,CACtB,IAAImX,EAAQ,EACZ,IAAK,MAAMC,KAAYpX,EACnB8E,KAAKuS,oBAAoBJ,EAAc,GAAG3W,KAAO6W,OAAYC,QAGhE,GAAI3X,OAAO8I,eAAevI,KAAWP,OAAOkB,UAC7C,IAAK,MAAO2W,EAAQF,KAAa3X,OAAO8X,QAAQvX,GAC5C8E,KAAKuS,oBAAoBJ,EAAc,GAAG3W,KAAOgX,KAAWF,QAIhEH,EAAatG,OAAOrQ,EAAKkX,OAAOxX,IAGxC,cAAc+P,EAAKD,EAAQrM,GACvB,MAAMgU,EAAQ,CAAC,MAAO,QAAQnV,SAASwN,EAAOS,eAE9C,GAAIkH,GAAShU,aAAgBiN,SAAU,CACnC,IAAK,MAAOpQ,EAAKN,KAAUyD,EACnBzD,SACA+P,EAAIkH,aAAatG,OAAOrQ,EAAKkX,OAAOxX,IAG5C,OAAO,KAIX,GAD4B,OAATyD,GAAiBhE,OAAO8I,eAAe9E,KAAUhE,OAAOkB,UAC3D,CAGZ,MAAM+W,EAAkBD,EAAQ1H,EAAIkH,aAAe,IAAIU,gBACvD,IAAK,MAAOrX,EAAKN,KAAUP,OAAO8X,QAAQ9T,GACtCqB,KAAKuS,oBAAoBK,EAAiBpX,EAAKN,GAEnD,OAAOyX,EACD,KACAC,EAEV,OAAOjU,GAGf,MAAMsT,UAAkBlS,MACpB,YAAYb,GACR,MAAM4T,EAAU,QAAQ5T,EAAS6T,WAAW7T,EAAS8T,aACrDlK,MAAMgK,GACN9S,KAAKxF,KAAOwF,KAAKqD,YAAY7I,KAC7BwF,KAAKsF,MAAQ,IAAIvF,MAAM+S,GAASxN,MAChCtF,KAAKd,SAAWA,GA8ExB,MAAMH,EAAO,IAAImS,EACjBnS,EAAKkU,kBAAkB,IA3EvB,MACI,cACIjT,KAAKkT,WAAY,EACjBlT,KAAK4R,gBAAkB,KAE3B,WAAW7S,GACPA,EAAK4N,UAAU5L,iBAAiB,cAAef,KAAKmT,eAAe1X,KAAKuE,OACxEjB,EAAKgC,iBAAiB,OAAQf,KAAKoT,aAAa3X,KAAKuE,OACrDjB,EAAKgC,iBAAiB,SAAUf,KAAKmT,eAAe1X,KAAKuE,OACzDjB,EAAKgC,iBAAiB,QAASf,KAAKqT,oBAAoB5X,KAAKuE,OAC7DjB,EAAKgC,iBAAiB,WAAYf,KAAKsT,qBAAqB7X,KAAKuE,OAErE,eACI/B,SAAS8C,iBAAiB,WAAYM,IACL,OAAzBrB,KAAK4R,iBACY,WAAdvQ,EAAM7F,OACJ6F,EAAM4I,SAAW5I,EAAM6I,UAAY7I,EAAM2I,QAAU3I,EAAM8I,UAC3DnK,KAAKkT,YACRlT,KAAK4R,gBAAgB2B,QACrBvT,KAAK4R,gBAAkB,SAInC,eAAevQ,GACX,IAAIqJ,EAAIC,EACR,MAAM,QAAErL,GAAY+B,EAAM5B,OAC1BO,KAAKkT,UAAY,YAAa7R,EAAM5B,OAC8K,SAA3I,QAA/DiL,EAAKrJ,EAAM5B,OAAOlC,QAAQN,aAAa,0BAAuC,IAAPyN,EAAgBA,EAA0C,QAApCC,EAAKtJ,EAAM5B,OAAOlC,QAAQR,YAAyB,IAAP4N,OAAgB,EAASA,EAAG1N,aAAa,qBAClK,IAAlBqC,EAAQiU,MAEdjU,EAAQiU,MAAQvT,KAAKkT,UAEzB,oBAAoB7R,GAChB,MAAM,gBAAEuQ,GAAoBvQ,EAAM5B,OAClCO,KAAK4R,gBAAkBA,EAE3B,uBACI5R,KAAK4R,gBAAkB,KACvB5R,KAAKkT,WAAY,KAsCzBnU,EAAKkU,kBAAkB,IAlCvB,MACI,cACIjT,KAAKwT,iBAAmB,IAAIC,IAEhC,WAAW1U,GACPA,EAAK4N,UAAU5L,iBAAiB,cAAef,KAAK0T,gBAAgBjY,KAAKuE,OACzEjB,EAAKgC,iBAAiB,QAASf,KAAK2T,qBAAqBlY,KAAKuE,OAC9DjB,EAAKgC,iBAAiB,WAAYf,KAAK4T,aAAanY,KAAKuE,OAE7D,gBAAgBqB,GACZ,IAAIqJ,EAAIC,EACR,MAAM,QAAEpN,EAAO,QAAE+B,GAAY+B,EAAM5B,OAC7BoU,EAA6D,QAAnDnJ,EAAKnN,EAAQN,aAAa,2BAAwC,IAAPyN,EAAgBA,EAA6B,QAAvBC,EAAKpN,EAAQR,YAAyB,IAAP4N,OAAgB,EAASA,EAAG1N,aAAa,oBACzKqC,EAAQuU,OAAoB,QAAXA,IAA2BA,QAAuCA,EAAS,WAEhG,qBAAqBxS,GACjB,IAAIqJ,EAAIC,EAAIC,EACZ,MAAM,gBAAEgH,EAAe,QAAEtS,GAAY+B,EAAM5B,QACpB,IAAnBH,EAAQuU,SAC+F,QAAtGlJ,EAAK3K,KAAKwT,iBAAiB1Y,IAA8B,QAAzB4P,EAAKpL,EAAQuU,cAA2B,IAAPnJ,EAAgBA,EAAK,kBAA+B,IAAPC,GAAyBA,EAAG4I,QAC3IvT,KAAKwT,iBAAiB1B,IAA8B,QAAzBlH,EAAKtL,EAAQuU,cAA2B,IAAPjJ,EAAgBA,EAAK,UAAWgH,IAGpG,aAAavQ,GACT,IAAIqJ,EACJ,MAAM,QAAE9K,EAAO,QAAEN,GAAY+B,EAAM5B,OAC9BG,EAAQiH,OAAOT,UAA8B,IAAnB9G,EAAQuU,QACnC7T,KAAKwT,iBAAiBM,OAAiC,QAAzBpJ,EAAKpL,EAAQuU,cAA2B,IAAPnJ,EAAgBA,EAAK,cASjF,Q,+BClqCf,IAAIqJ,EAGJA,EAAI,WACH,OAAO/T,KADJ,GAIJ,IAEC+T,EAAIA,GAAK,IAAIC,SAAS,cAAb,GACR,MAAOzU,GAEc,iBAAX1F,SAAqBka,EAAIla,QAOrCH,EAAOD,QAAUsa,G,8BCnBjB,cAUA,SAASE,EAAWtL,EAAWmK,KAAYoB,GACvC,IAAKvL,EACD,MAAM,IAAIlG,UAAU0R,EAAOrB,EAASoB,IAQ5C,SAASC,EAAOrB,EAASoB,GACrB,IAAIja,EAAI,EACR,OAAO6Y,EAAQ9E,QAAQ,WAAW,IAAMoG,EAAYF,EAAKja,QAM7D,SAASma,EAAYC,GACjB,MAAiB,iBAANA,GAAwB,OAANA,EAClB3B,OAAO2B,GAEX1Z,OAAOkB,UAAUoI,SAAS7J,KAAKia,GAG1C,IAAIC,EAjCJ3Z,OAAOC,eAAenB,EAAS,aAAc,CAAEyB,OAAO,IAgFtD,MAAMqZ,EAA2B,oBAAX1a,OAChBA,OACgB,oBAATwI,KACHA,UACkB,IAAXD,EACHA,EACsB,oBAAfD,WACHA,gBACA0F,EAElB,IAAI2M,EAYJ,MAAMC,EACF,YAAYC,EAAM5B,GACd9S,KAAK0U,KAAOA,EACZ1U,KAAK8S,QAAUA,EAMnB,QAAQoB,GACJ,IAAIxJ,EACJ,IAEI,GAAI8J,EAEA,YADAA,EAAmB,IAAKxU,KAAMkU,SAIlC,MAAM5O,GAAsC,QAA5BoF,GAAK,IAAI3K,OAAQuF,aAA0B,IAAPoF,EAAgBA,EAAK,IAAIsD,QAAQ,kBAAmB,MACxGhH,QAAQsB,KAAKtI,KAAK8S,WAAYoB,EAAM5O,GAExC,MAAOqF,MAMf,MAAMgK,EAAqC,IAAIF,EAAQ,MAAO,iDACxDG,EAAiC,IAAIH,EAAQ,MAAO,uEACpDI,EAAiC,IAAIJ,EAAQ,MAAO,uEACpDK,EAAgC,IAAIL,EAAQ,MAAO,sDACnDM,EAA4B,IAAIN,EAAQ,MAAO,sEAC/CO,EAA6B,IAAIP,EAAQ,MAAO,4EAChDQ,EAAmB,IAAIR,EAAQ,MAAO,4FACtCS,EAAuB,IAAIT,EAAQ,MAAO,6FAC1CU,EAA0B,IAAIV,EAAQ,MAAO,kDAQnD,MAAMlO,EAIF,kBACI,OAAO6O,EAKX,6BACI,OAAOC,EAKX,uBACI,OAAOC,EAKX,4BACI,OAAOC,EAQX,YAAYlY,EAAMmY,GACd7a,OAAOC,eAAeoF,KAAM,YAAa,CACrC9E,OAAO,EACPL,YAAY,IAEhB,MAAM4a,EAAOD,QAAqDA,EAAgB,GAClFE,EAAgB5D,IAAI9R,KAAM,CACtB3C,KAAMqV,OAAOrV,GACbsJ,QAASlJ,QAAQgY,EAAK9O,SACtBC,WAAYnJ,QAAQgY,EAAK7O,YACzB+O,SAAUlY,QAAQgY,EAAKE,UACvBrU,OAAQ,KACR+I,cAAe,KACfuL,qBAAqB,EACrBC,8BAA8B,EAC9BC,cAAc,EACdC,uBAAuB,EACvBC,cAAc,EACdC,UAAWjS,KAAKkS,QAOxB,WACI,OAAOC,EAAEnW,MAAM3C,KAMnB,aACI,OAAO8Y,EAAEnW,MAAMsB,OAOnB,iBACI,OAAO6U,EAAEnW,MAAMsB,OAMnB,oBACI,OAAO6U,EAAEnW,MAAMqK,cAOnB,eACI,MAAMA,EAAgB8L,EAAEnW,MAAMqK,cAC9B,OAAIA,EACO,CAACA,GAEL,GAKX,WACI,OAAO+K,EAKX,sBACI,OAAOC,EAKX,gBACI,OAAOC,EAKX,qBACI,OAAOC,EAMX,iBACI,OAAOY,EAAEnW,MAAMgW,aAAe,EAAI,EAOtC,kBACIG,EAAEnW,MAAM4V,qBAAsB,EAOlC,mBACI,OAAOO,EAAEnW,MAAM4V,oBAOnB,iBAAiB1a,GACTA,EACAib,EAAEnW,MAAM4V,qBAAsB,EAG9BhB,EAA+BtM,OAOvC,2BACI,MAAM3J,EAAOwX,EAAEnW,MACfrB,EAAKiX,oBAAsBjX,EAAKkX,8BAA+B,EAMnE,cACI,OAAOM,EAAEnW,MAAM2G,QAMnB,iBACI,OAAOwP,EAAEnW,MAAM4G,WAOnB,kBACI,OAAQuP,EAAEnW,MAAM8V,aAOpB,gBAAgB5a,GACPA,EAID2Z,EAA+BvM,OAH/B8N,EAAcD,EAAEnW,OAUxB,iBACIoW,EAAcD,EAAEnW,OAMpB,uBACI,OAAOmW,EAAEnW,MAAM8V,aAKnB,eACI,OAAOK,EAAEnW,MAAM2V,SAMnB,gBACI,OAAO,EAKX,gBACI,OAAOQ,EAAEnW,MAAMiW,UAKnB,UAAU5Y,EAAMsJ,GAAU,EAAOC,GAAa,GAC1C,MAAMjI,EAAOwX,EAAEnW,MACXrB,EAAKqX,aACLrB,EAAmCrM,OAGvCoN,EAAgB5D,IAAI9R,KAAM,IACnBrB,EACHtB,KAAMqV,OAAOrV,GACbsJ,QAASlJ,QAAQkJ,GACjBC,WAAYnJ,QAAQmJ,GACpBtF,OAAQ,KACR+I,cAAe,KACfuL,qBAAqB,EACrBC,8BAA8B,EAC9BC,cAAc,KAO1B,MAAMV,EAAO,EACPC,EAAkB,EAClBC,EAAY,EACZC,EAAiB,EAIjBG,EAAkB,IAAIW,QAO5B,SAASF,EAAE9U,EAAO7G,EAAO,QACrB,MAAM8b,EAAOZ,EAAgB5a,IAAIuG,GAEjC,OADA4S,EAAmB,MAARqC,EAAc,iFAAkF9b,EAAM6G,GAC1GiV,EAMX,SAASF,EAAczX,GACfA,EAAKoX,sBACLhB,EAA0BzM,OAGzB3J,EAAKiI,WAIVjI,EAAKmX,cAAe,EAHhBhB,EAA8BxM,OAMtC3N,OAAOC,eAAe2L,EAAO,OAAQ,CAAE1L,YAAY,IACnDF,OAAOC,eAAe2L,EAAO,kBAAmB,CAAE1L,YAAY,IAC9DF,OAAOC,eAAe2L,EAAO,YAAa,CAAE1L,YAAY,IACxDF,OAAOC,eAAe2L,EAAO,iBAAkB,CAAE1L,YAAY,IAC7D,MAAM0T,EAAO5T,OAAO4b,oBAAoBhQ,EAAM1K,WAC9C,IAAK,IAAI5B,EAAI,EAAGA,EAAIsU,EAAKnQ,SAAUnE,EACf,gBAAZsU,EAAKtU,IAGTU,OAAOC,eAAe2L,EAAM1K,UAAW0S,EAAKtU,GAAI,CAAEY,YAAY,IA4ClE,IAAIkN,OAzCkB,IAAXwM,QAAkD,IAAjBA,EAAOhO,OAC/C5L,OAAO6I,eAAe+C,EAAM1K,UAAW0Y,EAAOhO,MAAM1K,WAyCxD,MAAM2a,EAAe,CACjBC,eAAgB,EAChBC,mBAAoB,EACpBC,sBAAuB,EACvBC,mBAAoB,EACpBC,sBAAuB,EACvBC,oBAAqB,EACrBC,4BAA6B,EAC7BC,cAAe,EACfC,kBAAmB,EACnBC,oBAAqB,GACrBC,kBAAmB,GACnBC,WAAY,GACZC,yBAA0B,GAC1BC,cAAe,GACfC,mBAAoB,GACpBC,eAAgB,GAChBC,kBAAmB,GACnBC,aAAc,GACdC,YAAa,GACbC,UAAW,GACXC,iBAAkB,GAClBC,mBAAoB,GACpBC,YAAa,GACbC,sBAAuB,GACvBC,eAAgB,IAEpB,SAASC,EAA0BC,GAC/B,MAAM5J,EAAO5T,OAAO4T,KAAKiI,GACzB,IAAK,IAAIvc,EAAI,EAAGA,EAAIsU,EAAKnQ,SAAUnE,EAAG,CAClC,MAAMuB,EAAM+S,EAAKtU,GACXiB,EAAQsb,EAAahb,GAC3Bb,OAAOC,eAAeud,EAAK3c,EAAK,CAC5BV,IAAG,IACQI,EAEX2H,cAAc,EACdhI,YAAY,KAUxB,MAAMud,UAAqB7R,EAKvB,YAAYlF,GACR,OAAO,IAAKgX,EAAkBhX,GAAvB,CAA+BA,GAE1C,YAAYA,GACRyH,MAAMzH,EAAMhE,KAAM,CACdsJ,QAAStF,EAAMsF,QACfC,WAAYvF,EAAMuF,WAClB+O,SAAUtU,EAAMsU,WAEhBtU,EAAMiX,cACNxP,MAAMyP,kBAENlX,EAAM0E,kBACN+C,MAAMqC,iBAEVqN,EAAkB1G,IAAI9R,KAAM,CAAEyY,SAAUpX,IAExC,MAAMkN,EAAO5T,OAAO4T,KAAKlN,GACzB,IAAK,IAAIpH,EAAI,EAAGA,EAAIsU,EAAKnQ,SAAUnE,EAAG,CAClC,MAAMuB,EAAM+S,EAAKtU,GACXuB,KAAOwE,MACTrF,OAAOC,eAAeoF,KAAMxE,EAAKkd,EAAyBrX,EAAO7F,KAI7E,kBACIsN,MAAMyP,kBACN,MAAM,SAAEE,GAAaE,EAAI3Y,MACrB,oBAAqByY,GACrBA,EAASF,kBAGjB,mBACI,OAAOzP,MAAMwP,aAEjB,iBAAiBpd,GACb4N,MAAMwP,aAAepd,EACrB,MAAM,SAAEud,GAAaE,EAAI3Y,MACrB,iBAAkByY,IAClBA,EAASH,aAAepd,GAGhC,2BACI4N,MAAMqE,2BACN,MAAM,SAAEsL,GAAaE,EAAI3Y,MACrB,6BAA8ByY,GAC9BA,EAAStL,2BAGjB,kBACI,OAAOrE,MAAM8P,YAEjB,gBAAgB1d,GACZ4N,MAAM8P,YAAc1d,EACpB,MAAM,SAAEud,GAAaE,EAAI3Y,MACrB,gBAAiByY,IACjBA,EAASG,YAAc1d,GAG/B,iBACI4N,MAAMqC,iBACN,MAAM,SAAEsN,GAAaE,EAAI3Y,MACrB,mBAAoByY,GACpBA,EAAStN,iBAGjB,gBACI,MAAM,SAAEsN,GAAaE,EAAI3Y,MACzB,MAAI,cAAeyY,EACRA,EAASxC,UAEbnN,MAAMmN,WAMrB,MAAMuC,EAAoB,IAAInC,QAM9B,SAASsC,EAAItX,GACT,MAAMiV,EAAOkC,EAAkB1d,IAAIuG,GAEnC,OADA4S,EAAmB,MAARqC,EAAc,8CAA+CjV,GACjEiV,EAOX,MAAMuC,EAAoB,IAAIxC,QAU9B,SAASgC,EAAkBnN,GACvB,MAAMrP,EAAYlB,OAAO8I,eAAeyH,GACxC,GAAiB,MAAbrP,EACA,OAAOuc,EAEX,IAAIU,EAAUD,EAAkB/d,IAAIe,GAKpC,OAJe,MAAXid,IACAA,EAUR,SAAuBC,EAAkBC,GACrC,MAAMC,UAA2BF,GAEjC,MAAMxK,EAAO5T,OAAO4T,KAAKyK,GACzB,IAAK,IAAI/e,EAAI,EAAGA,EAAIsU,EAAKnQ,SAAUnE,EAC/BU,OAAOC,eAAeqe,EAAmBpd,UAAW0S,EAAKtU,GAAIye,EAAyBM,EAAmBzK,EAAKtU,KAElH,OAAOgf,EAjBOC,CAAcb,EAAkBxc,GAAYA,GACtDgd,EAAkB/G,IAAIjW,EAAWid,IAE9BA,EAmBX,SAASJ,EAAyBP,EAAK3c,GACnC,MAAMjB,EAAII,OAAOuK,yBAAyBiT,EAAK3c,GAC/C,MAAO,CACH,MACI,MAAMid,EAAWE,EAAI3Y,MAAMyY,SACrBvd,EAAQud,EAASjd,GACvB,MAAqB,mBAAVN,EACAA,EAAMO,KAAKgd,GAEfvd,GAEX,IAAIA,GACiByd,EAAI3Y,MAAMyY,SAClBjd,GAAON,GAEpB2H,aAActI,EAAEsI,aAChBhI,WAAYN,EAAEM,YAkCtB,SAASse,EAAUzT,GACf,OAA8C,IAArB,EAAjBA,EAAS0T,OAMrB,SAASC,EAAU3T,GACf,OAA8C,IAArB,EAAjBA,EAAS0T,OAMrB,SAASE,EAAO5T,GACZ,OAA2C,IAAlB,EAAjBA,EAAS0T,OAMrB,SAASG,EAAU7T,GACf,OAA8C,IAArB,EAAjBA,EAAS0T,OASrB,SAASI,GAAe,SAAEpU,GAAY9D,EAAQD,GAC1C,IAC4B,mBAAb+D,EACPA,EAAShL,KAAKkH,EAAQD,GAEe,mBAAzB+D,EAASqU,aACrBrU,EAASqU,YAAYpY,GAG7B,MAAOqY,IA5sBX,SAAqBC,GACjB,IACI,MAAMnR,EAAQmR,aAAsB5Z,MAC9B4Z,EACA,IAAI5Z,MAAMqU,EAAYuF,IAE5B,GAAIrF,EAEA,YADAA,EAAoB9L,GAIxB,GAA6B,mBAAlB9I,eACe,mBAAfka,WACPla,cAAc,IAAIka,WAAW,QAAS,CAAEpR,QAAOsK,QAAStK,EAAMsK,gBAI7D,QAAuB,IAAZ+G,GACY,mBAAjBA,EAAQC,KAEf,YADAD,EAAQC,KAAK,oBAAqBtR,GAItCxB,QAAQwB,MAAMA,GAElB,MAAOkC,KAorBHqP,CAAYL,IAWpB,SAASM,GAAoB,UAAE3U,GAAaD,EAAU6U,GAClD,IAAK,IAAIhgB,EAAI,EAAGA,EAAIoL,EAAUjH,SAAUnE,EACpC,GAAIoL,EAAUpL,GAAGmL,WAAaA,GAC1B+T,EAAU9T,EAAUpL,MAAQggB,EAC5B,OAAOhgB,EAGf,OAAQ,EAYZ,SAASigB,EAAYC,EAAM/U,EAAU6U,EAASG,EAASvU,EAAMgB,GACzD,IAAIwT,EACAxT,IACAwT,EAAiBC,EAAe7e,KAAK,KAAM0e,EAAM/U,EAAU6U,GAC3DpT,EAAO9F,iBAAiB,QAASsZ,IAErC,MAAM3U,EAlGV,SAAwBN,EAAU6U,EAASG,EAASvU,EAAMgB,EAAQwT,GAC9D,MAAO,CACHjV,WACAgU,OAAQa,EAAU,EAAkB,IAC/BG,EAAU,EAAkB,IAC5BvU,EAAO,EAAe,GAC3BgB,SACAwT,kBA2FaE,CAAenV,EAAU6U,EAASG,EAASvU,EAAMgB,EAAQwT,GAQ1E,OAPIF,EAAKK,KACLL,EAAKK,KAAM,EACXL,EAAK9U,UAAY,IAAI8U,EAAK9U,UAAWK,IAGrCyU,EAAK9U,UAAUtH,KAAK2H,GAEjBA,EASX,SAAS4U,EAAeH,EAAM/U,EAAU6U,GACpC,MAAM5H,EAAQ2H,EAAoBG,EAAM/U,EAAU6U,GAClD,OAAe,IAAX5H,GACOoI,EAAiBN,EAAM9H,GAWtC,SAASoI,EAAiBN,EAAM9H,EAAOqI,GAAa,GAChD,MAAMhV,EAAWyU,EAAK9U,UAAUgN,GAQhC,OA5HJ,SAAoB3M,GAChBA,EAAS0T,OAAS,EAqHlBuB,CAAWjV,GAEPA,EAASmB,QACTnB,EAASmB,OAAOf,oBAAoB,QAASJ,EAAS2U,gBAGtDF,EAAKK,MAAQE,GACbP,EAAKK,KAAM,EACXL,EAAK9U,UAAY8U,EAAK9U,UAAUzD,QAAO,CAACuG,EAAGlO,IAAMA,IAAMoY,KAChD,IAEX8H,EAAK9U,UAAUE,OAAO8M,EAAO,IACtB,GAeX,SAASuI,EAAmBC,EAAaxd,GACrC,IAAIqN,EACJ,OAAqC,QAA5BA,EAAKmQ,EAAYxd,UAA0B,IAAPqN,EAAgBA,EAAMmQ,EAAYxd,GAAQ,CACnFyd,kBAAcjT,EACdkT,kBAAclT,EACd2S,KAAK,EACLnV,UAAW,IAvOnBwT,EAAkB/G,IAAInX,OAAOkB,UAAWuc,QAClB,IAAX7D,QAAkD,IAAjBA,EAAOhO,OAC/CsS,EAAkB/G,IAAIyC,EAAOhO,MAAM1K,UAAWuc,GA6OlD,MAAM7P,EAIF,cACIyS,EAAkBlJ,IAAI9R,KA3BnBrF,OAAOY,OAAO,OA8BrB,iBAAiB0f,EAAOC,EAAWC,GAC/B,MAAMN,EAAcO,EAAIpb,OAClB,SAAEoF,EAAQ,QAAE6U,EAAO,KAAEpU,EAAI,QAAEuU,EAAO,OAAEvT,EAAM,KAAExJ,GA8F1D,SAA6BA,EAAM+H,EAAU9F,GACzC,IAAIoL,EAEJ,GADA2Q,EAAejW,GACQ,iBAAZ9F,GAAoC,OAAZA,EAC/B,MAAO,CACHjC,KAAMqV,OAAOrV,GACb+H,SAAUA,QAA2CA,OAAWyC,EAChEoS,QAASxc,QAAQ6B,EAAQ2a,SACzBG,QAAS3c,QAAQ6B,EAAQ8a,SACzBvU,KAAMpI,QAAQ6B,EAAQuG,MACtBgB,OAAkC,QAAzB6D,EAAKpL,EAAQuH,cAA2B,IAAP6D,EAAgBA,OAAK7C,GAGvE,MAAO,CACHxK,KAAMqV,OAAOrV,GACb+H,SAAUA,QAA2CA,OAAWyC,EAChEoS,QAASxc,QAAQ6B,GACjB8a,SAAS,EACTvU,MAAM,EACNgB,YAAQgB,GAjHoDyT,CAAoBL,EAAOC,EAAWC,GAClG,GAAgB,MAAZ/V,IAAqByB,aAAuC,EAASA,EAAOT,SAC5E,OAEJ,MAAM+T,EAAOS,EAAmBC,EAAaxd,GAEvCpD,EAAI+f,EAAoBG,EAAM/U,EAAU6U,IACnC,IAAPhgB,EAKJigB,EAAYC,EAAM/U,EAAU6U,EAASG,EAASvU,EAAMgB,GAmJ5D,SAAuBnB,EAAU0U,EAASvU,EAAMgB,GAC5CmO,EAA2B1M,KAAK6Q,EAAUzT,GAAY,UAAY,SAAUA,EAASN,UACjFiU,EAAU3T,KAAc0U,GACxBnF,EAAiB3M,KAAK,WAEtBgR,EAAO5T,KAAcG,GACrBoP,EAAiB3M,KAAK,QAEtB5C,EAASmB,SAAWA,GACpBoO,EAAiB3M,KAAK,UAhKlBiT,CAAcpB,EAAK9U,UAAUpL,GAAImgB,EAASvU,EAAMgB,GAOxD,oBAAoBoU,EAAOC,EAAWC,GAClC,MAAMN,EAAcO,EAAIpb,OAClB,SAAEoF,EAAQ,QAAE6U,EAAO,KAAE5c,GAuGnC,SAA0BA,EAAM+H,EAAU9F,GAEtC,GADA+b,EAAejW,GACQ,iBAAZ9F,GAAoC,OAAZA,EAC/B,MAAO,CACHjC,KAAMqV,OAAOrV,GACb+H,SAAUA,QAA2CA,OAAWyC,EAChEoS,QAASxc,QAAQ6B,EAAQ2a,UAGjC,MAAO,CACH5c,KAAMqV,OAAOrV,GACb+H,SAAUA,QAA2CA,OAAWyC,EAChEoS,QAASxc,QAAQ6B,IAnHmBkc,CAAiBP,EAAOC,EAAWC,GACjEhB,EAAOU,EAAYxd,GACT,MAAZ+H,GAAoB+U,GACpBG,EAAeH,EAAM/U,EAAU6U,GAIvC,cAAc1a,GACV,MAAM4a,EAAOiB,EAAIpb,MAAM0S,OAAOnT,EAAElC,OAChC,GAAY,MAAR8c,EACA,OAAO,EAEX,MAAM9Y,EAAQ9B,aAAagH,EAAQhH,EAAI6Y,EAAaqD,KAAKlc,GACnDmc,EAAYvF,EAAE9U,EAAO,SAC3B,GAAIqa,EAAU1F,aACV,MA9cqBlD,EA8cS,sCA7clCyB,EAAOxM,aACA,IAAIwM,EAAOxM,aAAa+K,EAAS,sBAExB,MAAhB/K,IACAA,EAAe,MAAMA,UAAqBhI,MACtC,YAAY4b,GACR7S,MAAM6S,GACF5b,MAAM6b,mBACN7b,MAAM6b,kBAAkB5b,KAAM+H,GAItC,WACI,OAAO,GAGX,WACI,MAAO,sBAGfpN,OAAOkhB,iBAAiB9T,EAAalM,UAAW,CAC5C6Y,KAAM,CAAE7Z,YAAY,GACpBL,KAAM,CAAEK,YAAY,KAExBqd,EAA0BnQ,GAC1BmQ,EAA0BnQ,EAAalM,YAEpC,IAAIkM,EAAa+K,IA5B5B,IAAiCA,EAkdzB,GAFA4I,EAAU1F,cAAe,EACzB0F,EAAUpa,OAASoa,EAAUrR,cAAgBrK,MACxC0b,EAAU9F,oBAAqB,CAChC,MAAM,IAAE4E,EAAG,UAAEnV,GAAc8U,EAE3BA,EAAKK,KAAM,EAEX,IAAK,IAAIvgB,EAAI,EAAGA,EAAIoL,EAAUjH,SAAUnE,EAAG,CACvC,MAAMyL,EAAWL,EAAUpL,GAE3B,IAAIsf,EAAU7T,KAIV4T,EAAO5T,IAAa+U,EAAiBN,EAAMlgB,GAAIugB,KAG/CvgB,GAAK,GAGTyhB,EAAU3F,sBAAwBsD,EAAU3T,GAC5C8T,EAAe9T,EAAU1F,KAAMqB,GAC/Bqa,EAAU3F,uBAAwB,EAE9B2F,EAAU7F,8BACV,MAIH2E,IACDL,EAAKK,KAAM,GAQnB,OALAkB,EAAUpa,OAAS,KACnBoa,EAAUrR,cAAgB,KAC1BqR,EAAU7F,8BAA+B,EACzC6F,EAAU9F,qBAAsB,EAChC8F,EAAU1F,cAAe,GACjB0F,EAAU5F,cAM1B,MAAMkF,EAAoB,IAAI3E,QAO9B,SAAS+E,EAAI9Z,EAAQ9G,EAAO,QACxB,MAAM8b,EAAO0E,EAAkBlgB,IAAIwG,GAEnC,OADA2S,EAAmB,MAARqC,EAAc,uFAAwF9b,EAAM8G,GAChHgV,EAmDX,SAAS+E,EAAejW,GACpB,GAAwB,mBAAbA,IACc,iBAAbA,GACS,OAAbA,GACgC,mBAAzBA,EAASqU,aAHxB,CAMA,GAAgB,MAAZrU,GAAwC,iBAAbA,EAI/B,MAAM,IAAI3C,UAAU0R,EAAOe,EAAqBpC,QAAS,CAAC1N,KAHtD8P,EAAqB5M,KAAKlD,IAyBlC,MAAM0W,EAASnhB,OAAO4b,oBAAoBhO,EAAY1M,WACtD,IAAK,IAAI5B,EAAI,EAAGA,EAAI6hB,EAAO1d,SAAUnE,EACf,gBAAd6hB,EAAO7hB,IAGXU,OAAOC,eAAe2N,EAAY1M,UAAWigB,EAAO7hB,GAAI,CAAEY,YAAY,IAa1E,SAASkhB,EAAuBza,EAAQjE,GACpC,IAAIqN,EAAIC,EAER,OAA4F,QAApFA,EAA8B,QAAxBD,EADE0Q,EAAI9Z,EAAQ,UACDjE,UAA0B,IAAPqN,OAAgB,EAASA,EAAGoQ,oBAAiC,IAAPnQ,EAAgBA,EAAK,KAQ7H,SAASqR,EAAuB1a,EAAQjE,EAAM+H,GAC1B,MAAZA,GAAwC,mBAAbA,GAC3B+P,EAAwB7M,KAAKlD,GAET,mBAAbA,GACc,iBAAbA,GAAsC,OAAbA,EAgBzC,SAAsC9D,EAAQjE,EAAM+H,GAChD,MAAM+U,EAAOS,EAAmBQ,EAAI9Z,EAAQ,UAAWoR,OAAOrV,IAC9D8c,EAAKW,aAAe1V,EACK,MAArB+U,EAAKY,eACLZ,EAAKY,aAAeb,EAAYC,EAsBxC,SAAsCA,GAClC,OAAO,SAAU9Y,GACb,MAAM+D,EAAW+U,EAAKW,aACE,mBAAb1V,GACPA,EAAShL,KAAK4F,KAAMqB,IA1Bc4a,CAA6B9B,IAAO,GAAO,GAAO,OAAOtS,IAnB/FqU,CAA6B5a,EAAQjE,EAAM+H,GA4BnD,SAAsC9D,EAAQjE,GAC1C,MACM8c,EADUiB,EAAI9Z,EAAQ,UACPoR,OAAOrV,IACxB8c,GAAQA,EAAKY,eACbT,EAAeH,EAAMA,EAAKY,aAAa3V,UAAU,GACjD+U,EAAKW,aAAeX,EAAKY,kBAAelT,GA9BxCsU,CAA6B7a,EAAQjE,GAmE7C,SAAS+e,GAAqB9a,EAAQjE,EAAMgf,GACxC1hB,OAAOC,eAAe0G,EAAQ,KAAKjE,IAAQ,CACvC,MACI,OAAO0e,EAAuB/b,KAAM3C,IAExC,IAAInC,GACA8gB,EAAuBhc,KAAM3C,EAAMnC,IAEvC2H,cAAc,EACdhI,YAAY,SA1GE,IAAX0Z,QACuB,IAAvBA,EAAOhM,aACd5N,OAAO6I,eAAe+E,EAAY1M,UAAW0Y,EAAOhM,YAAY1M,WA4GpEpC,EAAQ8M,MAAQA,EAChB9M,EAAQ8O,YAAcA,EACtB9O,EAAQ6iB,QAAU/T,EAClB9O,EAAQ8iB,wBA/BR,YAAoCC,GAChC,MAAMC,UAA0BlU,GAEhC,IAAK,IAAItO,EAAI,EAAGA,EAAIuiB,EAAMpe,SAAUnE,EAChCmiB,GAAqBK,EAAkB5gB,UAAW2gB,EAAMviB,IAE5D,OAAOwiB,GA0BXhjB,EAAQ2iB,qBAAuBA,GAC/B3iB,EAAQsiB,uBAAyBA,EACjCtiB,EAAQijB,gBAtnCR,SAAyBxhB,GACrB+Y,EAA4B,mBAAV/Y,QAAkC2M,IAAV3M,EAAqB,iEAAkEA,GACjIoZ,EAAsBpZ,GAqnC1BzB,EAAQuiB,uBAAyBA,EACjCviB,EAAQkjB,kBA/jCR,SAA2BzhB,GACvB+Y,EAA4B,mBAAV/Y,QAAkC2M,IAAV3M,EAAqB,mEAAoEA,GACnIsZ,EAAqBtZ,K,mDCnGzB,yBAIA,IAAK+X,kBAAkB,IAAI,KAE3BhV,SAAS8C,iBAAiB,mBAAoB,IAAKc,WAAWpG,KAAK,O,cCLnE,IAOImhB,EACAC,EARAhD,EAAUngB,EAAOD,QAAU,GAU/B,SAASqjB,IACL,MAAM,IAAI/c,MAAM,mCAEpB,SAASgd,IACL,MAAM,IAAIhd,MAAM,qCAsBpB,SAASid,EAAWC,GAChB,GAAIL,IAAqBM,WAErB,OAAOA,WAAWD,EAAK,GAG3B,IAAKL,IAAqBE,IAAqBF,IAAqBM,WAEhE,OADAN,EAAmBM,WACZA,WAAWD,EAAK,GAE3B,IAEI,OAAOL,EAAiBK,EAAK,GAC/B,MAAM1d,GACJ,IAEI,OAAOqd,EAAiBxiB,KAAK,KAAM6iB,EAAK,GAC1C,MAAM1d,GAEJ,OAAOqd,EAAiBxiB,KAAK4F,KAAMid,EAAK,MAvCnD,WACG,IAEQL,EADsB,mBAAfM,WACYA,WAEAJ,EAEzB,MAAOvd,GACLqd,EAAmBE,EAEvB,IAEQD,EADwB,mBAAjBM,aACcA,aAEAJ,EAE3B,MAAOxd,GACLsd,EAAqBE,GAjB7B,GAwEA,IAEIK,EAFAC,EAAQ,GACRC,GAAW,EAEXC,GAAc,EAElB,SAASC,IACAF,GAAaF,IAGlBE,GAAW,EACPF,EAAahf,OACbif,EAAQD,EAAaK,OAAOJ,GAE5BE,GAAc,EAEdF,EAAMjf,QACNsf,KAIR,SAASA,IACL,IAAIJ,EAAJ,CAGA,IAAIK,EAAUX,EAAWQ,GACzBF,GAAW,EAGX,IADA,IAAIM,EAAMP,EAAMjf,OACVwf,GAAK,CAGP,IAFAR,EAAeC,EACfA,EAAQ,KACCE,EAAaK,GACdR,GACAA,EAAaG,GAAYM,MAGjCN,GAAc,EACdK,EAAMP,EAAMjf,OAEhBgf,EAAe,KACfE,GAAW,EAnEf,SAAyBQ,GACrB,GAAIjB,IAAuBM,aAEvB,OAAOA,aAAaW,GAGxB,IAAKjB,IAAuBE,IAAwBF,IAAuBM,aAEvE,OADAN,EAAqBM,aACdA,aAAaW,GAExB,IAEWjB,EAAmBiB,GAC5B,MAAOve,GACL,IAEI,OAAOsd,EAAmBziB,KAAK,KAAM0jB,GACvC,MAAOve,GAGL,OAAOsd,EAAmBziB,KAAK4F,KAAM8d,KAgD7CC,CAAgBJ,IAiBpB,SAASK,EAAKf,EAAKgB,GACfje,KAAKid,IAAMA,EACXjd,KAAKie,MAAQA,EAYjB,SAASC,KA5BTrE,EAAQsE,SAAW,SAAUlB,GACzB,IAAI/I,EAAO,IAAI/S,MAAMwD,UAAUvG,OAAS,GACxC,GAAIuG,UAAUvG,OAAS,EACnB,IAAK,IAAInE,EAAI,EAAGA,EAAI0K,UAAUvG,OAAQnE,IAClCia,EAAKja,EAAI,GAAK0K,UAAU1K,GAGhCojB,EAAMtf,KAAK,IAAIigB,EAAKf,EAAK/I,IACJ,IAAjBmJ,EAAMjf,QAAiBkf,GACvBN,EAAWU,IASnBM,EAAKniB,UAAUgiB,IAAM,WACjB7d,KAAKid,IAAIrY,MAAM,KAAM5E,KAAKie,QAE9BpE,EAAQlL,MAAQ,UAChBkL,EAAQuE,SAAU,EAClBvE,EAAQwE,IAAM,GACdxE,EAAQyE,KAAO,GACfzE,EAAQ0E,QAAU,GAClB1E,EAAQ2E,SAAW,GAInB3E,EAAQ4E,GAAKP,EACbrE,EAAQK,YAAcgE,EACtBrE,EAAQhU,KAAOqY,EACfrE,EAAQ6E,IAAMR,EACdrE,EAAQS,eAAiB4D,EACzBrE,EAAQ8E,mBAAqBT,EAC7BrE,EAAQC,KAAOoE,EACfrE,EAAQ+E,gBAAkBV,EAC1BrE,EAAQgF,oBAAsBX,EAE9BrE,EAAQxU,UAAY,SAAU7K,GAAQ,MAAO,IAE7Cqf,EAAQiF,QAAU,SAAUtkB,GACxB,MAAM,IAAIuF,MAAM,qCAGpB8Z,EAAQkF,IAAM,WAAc,MAAO,KACnClF,EAAQmF,MAAQ,SAAUC,GACtB,MAAM,IAAIlf,MAAM,mCAEpB8Z,EAAQqF,MAAQ,WAAa,OAAO","file":"dependentSelectBox.all.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"DependentSelectBox\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"DependentSelectBox\"] = factory();\n\telse\n\t\troot[\"DependentSelectBox\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 5);\n","export const DATA_DISALLOW_SUBMIT_WHEN_DISABLED =\n  'data-disallow-submit-when-disabled';\nexport const DATA_LINK = 'data-dependent-data-link';\nexport const DATA_PARENT_LISTENER = 'data-has-dependent-listener';\nexport const DATA_PARENTS = 'data-parents';\nexport const DATA_SELECT_BOX = 'data-dependent-select-box';\nexport const EVENT_LOADED = 'dependentSelectBoxLoaded';\nexport const EVENT_LOADING = 'dependentSelectBoxLoading';\nexport const SELECT_BOX_SELECTOR = `[${DATA_SELECT_BOX}]`;\n","import { DATA_DISALLOW_SUBMIT_WHEN_DISABLED } from './constants';\nimport { ParentValue } from './types';\n\nexport const maybeGetNumberValue = (value: string): number | string => {\n  const number = Number(value);\n  if (!Number.isNaN(number)) return number;\n  return value;\n};\n\nexport const getMultiChoiceValue = (element: HTMLInputElement): ParentValue => {\n  const value: ParentValue = [];\n  if (element instanceof HTMLSelectElement) {\n    for (const option of element.selectedOptions) {\n      value.push(maybeGetNumberValue(option.value));\n    }\n  }\n  if (['checkbox', 'radio'].includes(element.type)) {\n    const inputs = document.querySelectorAll(\n      `input[name=\"${element.name}\"]`,\n    ) as NodeListOf<HTMLInputElement>;\n    for (const input of inputs) {\n      if (input.checked) value.push(maybeGetNumberValue(input.value));\n    }\n  }\n  return value.length ? value : null;\n};\n\nexport const isMultiChoice = (element: HTMLInputElement): boolean => {\n  if (element.type === 'checkbox') {\n    return element.name.includes('[]');\n  }\n  return element.type === 'radio' || Boolean(element.multiple);\n};\n\nexport const maybeDisableSubmit = (selectBox: HTMLSelectElement): void => {\n  const { form } = selectBox;\n  const disallowSubmit = selectBox.getAttribute(\n    DATA_DISALLOW_SUBMIT_WHEN_DISABLED,\n  );\n  if (form && disallowSubmit !== null) {\n    for (const input of form.elements as HTMLCollectionOf<HTMLInputElement>) {\n      if (input !== (selectBox as HTMLElement)) {\n        input.disabled = selectBox.disabled && input.type === 'submit';\n      }\n    }\n  }\n};\n","import { DATA_PARENT_LISTENER, DATA_PARENTS } from './constants';\nimport { FormElement, Parents, ParentsValues, ParentValue } from './types';\nimport {\n  getMultiChoiceValue,\n  isMultiChoice,\n  maybeGetNumberValue,\n} from './utils';\n\nconst getParents = (selectBox: HTMLElement): Parents => {\n  const parentsData = selectBox.getAttribute(DATA_PARENTS);\n  if (parentsData) {\n    return JSON.parse(parentsData);\n  }\n  return [];\n};\n\nconst getParentValue = (element: HTMLInputElement): ParentValue => {\n  if (isMultiChoice(element)) return getMultiChoiceValue(element);\n  if (element.type === 'checkbox') return element.checked;\n  const value = element.value.trim();\n  if (element.type === 'textarea') return value;\n  if (value === '') return null;\n  return maybeGetNumberValue(value);\n};\n\nconst getParentsData = (\n  form: HTMLFormElement,\n  parents: Parents,\n): ParentsValues => {\n  const data: ParentsValues = {};\n  for (const parent of parents) {\n    const element = form.elements.namedItem(parent) as FormElement;\n    if (element) {\n      data[element.name] = getParentValue(element);\n    }\n  }\n  return data;\n};\n\nconst parentHasListener = (parent: HTMLInputElement): boolean =>\n  parent.getAttribute(DATA_PARENT_LISTENER) !== null;\n\nconst setParentHasListener = (parent: HTMLInputElement): void =>\n  parent.setAttribute(DATA_PARENT_LISTENER, 'true');\n\nexport default {\n  getParents,\n  getParentValue,\n  getParentsData,\n  parentHasListener,\n  setParentHasListener,\n};\n","import { Naja } from 'naja';\n\nimport {\n  Request,\n  DependentSelectBoxes,\n  Response,\n  LoadingEvent,\n  LoadedEvent,\n} from './types';\nimport { maybeDisableSubmit } from './utils';\nimport { DATA_LINK, EVENT_LOADED, EVENT_LOADING } from './constants';\n\nclass RequestManager {\n  public constructor(naja: Naja) {\n    this.naja = naja;\n  }\n\n  private naja: Naja;\n\n  public handleResponse = (\n    form: HTMLFormElement,\n    dependentSelectBoxes: DependentSelectBoxes,\n    response: Response,\n  ): void => {\n    for (const id in response) {\n      const element = document.getElementById(id) as HTMLSelectElement;\n      element.disabled = response[id].disabled;\n      element.innerHTML = response[id].options;\n      maybeDisableSubmit(element);\n    }\n    const e: LoadedEvent = new CustomEvent(EVENT_LOADED, {\n      detail: { form, dependentSelectBoxes, response },\n    });\n    this.naja.dispatchEvent(e);\n  };\n\n  public handleRequest = async (\n    form: HTMLFormElement,\n    dependentSelectBoxes: DependentSelectBoxes,\n    request: Request,\n  ): Promise<void> => {\n    const link = form.getAttribute(DATA_LINK);\n    if (!link) {\n      throw new Error(\n        `Form \"${form.id}\" must have \"data-dependent-data-link\" attribute!`,\n      );\n    }\n    const e: LoadingEvent = new CustomEvent(EVENT_LOADING, {\n      detail: { form, dependentSelectBoxes, request },\n    });\n    this.naja.dispatchEvent(e);\n    const response: Response = await this.naja.makeRequest(\n      'POST',\n      link,\n      JSON.stringify(request),\n      {\n        fetch: {\n          headers: {\n            'Content-Type': 'application/json',\n          },\n        },\n        history: false,\n      },\n    );\n    this.handleResponse(form, dependentSelectBoxes, response);\n  };\n}\n\nexport default RequestManager;\n","import { DependentSelectBoxes, Parents, Request } from './types';\nimport ParentsManager from './ParentsManager';\n\nconst get = (\n  form: HTMLFormElement,\n  trigger: HTMLInputElement,\n  selectBoxes: DependentSelectBoxes,\n  parents: Parents,\n): Request => {\n  const elementIds = [];\n  for (const selectBox of selectBoxes) {\n    if (!parents.includes(selectBox.id)) elementIds.push(selectBox.id);\n    for (const parent of ParentsManager.getParents(selectBox)) {\n      if (!elementIds.includes(parent)) elementIds.push(parent);\n    }\n  }\n  const values = ParentsManager.getParentsData(form, [\n    ...parents,\n    ...elementIds,\n  ]);\n  return { trigger: trigger.id, values };\n};\n\nexport default { get };\n","import { Naja } from 'naja';\n\nimport ParentsManager from './ParentsManager';\nimport RequestManager from './RequestManager';\nimport { DependentSelectBoxes, FormElement, Parents } from './types';\nimport { SELECT_BOX_SELECTOR } from './constants';\nimport DataManager from './DataManager';\n\nclass DOMManager {\n  public constructor(naja: Naja) {\n    this.requestManager = new RequestManager(naja);\n  }\n\n  private requestManager: RequestManager;\n\n  public addListeners = (\n    parent: HTMLInputElement,\n    parents: Parents,\n    selectBoxes: DependentSelectBoxes,\n  ): void => {\n    const events = ['change'];\n    if (this.isParentTextBased(parent)) {\n      events.push('keydown');\n    }\n    events.forEach(e =>\n      parent.addEventListener(e, this.handleChange(parents, selectBoxes)),\n    );\n    ParentsManager.setParentHasListener(parent);\n  };\n\n  public findParent = (id: string): FormElement =>\n    document.getElementById(id) as FormElement;\n\n  public findSelectBoxes = (): DependentSelectBoxes =>\n    Array.from(document.querySelectorAll(SELECT_BOX_SELECTOR));\n\n  public handleChange = (\n    parents: Parents,\n    selectBoxes: DependentSelectBoxes,\n  ) => (event: Event): void => {\n    const trigger = event.target as HTMLInputElement;\n    const form = trigger.form as HTMLFormElement;\n    for (const selectBox of selectBoxes) {\n      const selectBoxParents = ParentsManager.getParents(selectBox);\n      selectBox.disabled = selectBoxParents.includes(trigger.id);\n    }\n    const formSelectBoxes = this.getFormSelectBoxes(form, selectBoxes);\n    this.requestManager.handleRequest(\n      form,\n      formSelectBoxes,\n      DataManager.get(form, trigger, formSelectBoxes, parents),\n    );\n  };\n\n  private getFormSelectBoxes = (\n    form: HTMLFormElement,\n    selectBoxes: DependentSelectBoxes,\n  ): DependentSelectBoxes => selectBoxes.filter(s => s.form === form);\n\n  private isParentTextBased = (parent: HTMLInputElement): boolean =>\n    ['text', 'number', 'textarea'].includes(parent.type);\n}\n\nexport default DOMManager;\n","import { Naja } from 'naja';\nimport { Extension } from 'naja/dist/Naja';\n\nimport DOMManager from './DOMManager';\nimport ParentsManager from './ParentsManager';\nimport { DependentSelectBoxes, Parents } from './types';\nimport { maybeDisableSubmit } from './utils';\n\nclass DependentSelectBox implements Extension {\n  private domManager: DOMManager;\n\n  public readonly initialize = (naja: Naja): void => {\n    this.domManager = new DOMManager(naja);\n    naja.addEventListener('init', this.load);\n    naja.addEventListener('complete', this.load);\n    naja.snippetHandler.addEventListener('afterUpdate', this.load);\n  };\n\n  public readonly load = (): void => {\n    const selectBoxes = this.domManager.findSelectBoxes();\n    for (const selectBox of selectBoxes) {\n      const parents = ParentsManager.getParents(selectBox);\n      parents.forEach(this.initParent(parents, selectBoxes));\n      maybeDisableSubmit(selectBox);\n    }\n  };\n\n  private readonly initParent = (\n    parents: Parents,\n    selectBoxes: DependentSelectBoxes,\n  ) => (id: string): void => {\n    const parent = this.domManager.findParent(id);\n    if (parent !== null && !ParentsManager.parentHasListener(parent)) {\n      this.domManager.addListeners(parent, parents, selectBoxes);\n    }\n  };\n}\n\nexport default DependentSelectBox;\n","/*\n * Naja.js\n * 2.1.5\n *\n * by Jiří Pudil <https://jiripudil.cz>\n */\nimport { EventTarget as EventTarget$1 } from 'event-target-shim';\n\nvar commonjsGlobal = typeof globalThis !== 'undefined' ? globalThis : typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : {};\n\n(function (factory) {\n  factory();\n}((function () {\n  function _classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n      throw new TypeError(\"Cannot call a class as a function\");\n    }\n  }\n\n  function _defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  function _createClass(Constructor, protoProps, staticProps) {\n    if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) _defineProperties(Constructor, staticProps);\n    return Constructor;\n  }\n\n  function _inherits(subClass, superClass) {\n    if (typeof superClass !== \"function\" && superClass !== null) {\n      throw new TypeError(\"Super expression must either be null or a function\");\n    }\n\n    subClass.prototype = Object.create(superClass && superClass.prototype, {\n      constructor: {\n        value: subClass,\n        writable: true,\n        configurable: true\n      }\n    });\n    if (superClass) _setPrototypeOf(subClass, superClass);\n  }\n\n  function _getPrototypeOf(o) {\n    _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n      return o.__proto__ || Object.getPrototypeOf(o);\n    };\n    return _getPrototypeOf(o);\n  }\n\n  function _setPrototypeOf(o, p) {\n    _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n      o.__proto__ = p;\n      return o;\n    };\n\n    return _setPrototypeOf(o, p);\n  }\n\n  function _isNativeReflectConstruct() {\n    if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n    if (Reflect.construct.sham) return false;\n    if (typeof Proxy === \"function\") return true;\n\n    try {\n      Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n      return true;\n    } catch (e) {\n      return false;\n    }\n  }\n\n  function _assertThisInitialized(self) {\n    if (self === void 0) {\n      throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n    }\n\n    return self;\n  }\n\n  function _possibleConstructorReturn(self, call) {\n    if (call && (typeof call === \"object\" || typeof call === \"function\")) {\n      return call;\n    }\n\n    return _assertThisInitialized(self);\n  }\n\n  function _createSuper(Derived) {\n    var hasNativeReflectConstruct = _isNativeReflectConstruct();\n\n    return function _createSuperInternal() {\n      var Super = _getPrototypeOf(Derived),\n          result;\n\n      if (hasNativeReflectConstruct) {\n        var NewTarget = _getPrototypeOf(this).constructor;\n\n        result = Reflect.construct(Super, arguments, NewTarget);\n      } else {\n        result = Super.apply(this, arguments);\n      }\n\n      return _possibleConstructorReturn(this, result);\n    };\n  }\n\n  function _superPropBase(object, property) {\n    while (!Object.prototype.hasOwnProperty.call(object, property)) {\n      object = _getPrototypeOf(object);\n      if (object === null) break;\n    }\n\n    return object;\n  }\n\n  function _get(target, property, receiver) {\n    if (typeof Reflect !== \"undefined\" && Reflect.get) {\n      _get = Reflect.get;\n    } else {\n      _get = function _get(target, property, receiver) {\n        var base = _superPropBase(target, property);\n\n        if (!base) return;\n        var desc = Object.getOwnPropertyDescriptor(base, property);\n\n        if (desc.get) {\n          return desc.get.call(receiver);\n        }\n\n        return desc.value;\n      };\n    }\n\n    return _get(target, property, receiver || target);\n  }\n\n  var Emitter = /*#__PURE__*/function () {\n    function Emitter() {\n      _classCallCheck(this, Emitter);\n\n      Object.defineProperty(this, 'listeners', {\n        value: {},\n        writable: true,\n        configurable: true\n      });\n    }\n\n    _createClass(Emitter, [{\n      key: \"addEventListener\",\n      value: function addEventListener(type, callback, options) {\n        if (!(type in this.listeners)) {\n          this.listeners[type] = [];\n        }\n\n        this.listeners[type].push({\n          callback: callback,\n          options: options\n        });\n      }\n    }, {\n      key: \"removeEventListener\",\n      value: function removeEventListener(type, callback) {\n        if (!(type in this.listeners)) {\n          return;\n        }\n\n        var stack = this.listeners[type];\n\n        for (var i = 0, l = stack.length; i < l; i++) {\n          if (stack[i].callback === callback) {\n            stack.splice(i, 1);\n            return;\n          }\n        }\n      }\n    }, {\n      key: \"dispatchEvent\",\n      value: function dispatchEvent(event) {\n        if (!(event.type in this.listeners)) {\n          return;\n        }\n\n        var stack = this.listeners[event.type];\n        var stackToCall = stack.slice();\n\n        for (var i = 0, l = stackToCall.length; i < l; i++) {\n          var listener = stackToCall[i];\n\n          try {\n            listener.callback.call(this, event);\n          } catch (e) {\n            Promise.resolve().then(function () {\n              throw e;\n            });\n          }\n\n          if (listener.options && listener.options.once) {\n            this.removeEventListener(event.type, listener.callback);\n          }\n        }\n\n        return !event.defaultPrevented;\n      }\n    }]);\n\n    return Emitter;\n  }();\n\n  var AbortSignal = /*#__PURE__*/function (_Emitter) {\n    _inherits(AbortSignal, _Emitter);\n\n    var _super = _createSuper(AbortSignal);\n\n    function AbortSignal() {\n      var _this;\n\n      _classCallCheck(this, AbortSignal);\n\n      _this = _super.call(this); // Some versions of babel does not transpile super() correctly for IE <= 10, if the parent\n      // constructor has failed to run, then \"this.listeners\" will still be undefined and then we call\n      // the parent constructor directly instead as a workaround. For general details, see babel bug:\n      // https://github.com/babel/babel/issues/3041\n      // This hack was added as a fix for the issue described here:\n      // https://github.com/Financial-Times/polyfill-library/pull/59#issuecomment-477558042\n\n      if (!_this.listeners) {\n        Emitter.call(_assertThisInitialized(_this));\n      } // Compared to assignment, Object.defineProperty makes properties non-enumerable by default and\n      // we want Object.keys(new AbortController().signal) to be [] for compat with the native impl\n\n\n      Object.defineProperty(_assertThisInitialized(_this), 'aborted', {\n        value: false,\n        writable: true,\n        configurable: true\n      });\n      Object.defineProperty(_assertThisInitialized(_this), 'onabort', {\n        value: null,\n        writable: true,\n        configurable: true\n      });\n      return _this;\n    }\n\n    _createClass(AbortSignal, [{\n      key: \"toString\",\n      value: function toString() {\n        return '[object AbortSignal]';\n      }\n    }, {\n      key: \"dispatchEvent\",\n      value: function dispatchEvent(event) {\n        if (event.type === 'abort') {\n          this.aborted = true;\n\n          if (typeof this.onabort === 'function') {\n            this.onabort.call(this, event);\n          }\n        }\n\n        _get(_getPrototypeOf(AbortSignal.prototype), \"dispatchEvent\", this).call(this, event);\n      }\n    }]);\n\n    return AbortSignal;\n  }(Emitter);\n  var AbortController = /*#__PURE__*/function () {\n    function AbortController() {\n      _classCallCheck(this, AbortController);\n\n      // Compared to assignment, Object.defineProperty makes properties non-enumerable by default and\n      // we want Object.keys(new AbortController()) to be [] for compat with the native impl\n      Object.defineProperty(this, 'signal', {\n        value: new AbortSignal(),\n        writable: true,\n        configurable: true\n      });\n    }\n\n    _createClass(AbortController, [{\n      key: \"abort\",\n      value: function abort() {\n        var event;\n\n        try {\n          event = new Event('abort');\n        } catch (e) {\n          if (typeof document !== 'undefined') {\n            if (!document.createEvent) {\n              // For Internet Explorer 8:\n              event = document.createEventObject();\n              event.type = 'abort';\n            } else {\n              // For Internet Explorer 11:\n              event = document.createEvent('Event');\n              event.initEvent('abort', false, false);\n            }\n          } else {\n            // Fallback where document isn't available:\n            event = {\n              type: 'abort',\n              bubbles: false,\n              cancelable: false\n            };\n          }\n        }\n\n        this.signal.dispatchEvent(event);\n      }\n    }, {\n      key: \"toString\",\n      value: function toString() {\n        return '[object AbortController]';\n      }\n    }]);\n\n    return AbortController;\n  }();\n\n  if (typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n    // These are necessary to make sure that we get correct output for:\n    // Object.prototype.toString.call(new AbortController())\n    AbortController.prototype[Symbol.toStringTag] = 'AbortController';\n    AbortSignal.prototype[Symbol.toStringTag] = 'AbortSignal';\n  }\n\n  function polyfillNeeded(self) {\n    if (self.__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL) {\n      console.log('__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL=true is set, will force install polyfill');\n      return true;\n    } // Note that the \"unfetch\" minimal fetch polyfill defines fetch() without\n    // defining window.Request, and this polyfill need to work on top of unfetch\n    // so the below feature detection needs the !self.AbortController part.\n    // The Request.prototype check is also needed because Safari versions 11.1.2\n    // up to and including 12.1.x has a window.AbortController present but still\n    // does NOT correctly implement abortable fetch:\n    // https://bugs.webkit.org/show_bug.cgi?id=174980#c2\n\n\n    return typeof self.Request === 'function' && !self.Request.prototype.hasOwnProperty('signal') || !self.AbortController;\n  }\n\n  /**\n   * Note: the \"fetch.Request\" default value is available for fetch imported from\n   * the \"node-fetch\" package and not in browsers. This is OK since browsers\n   * will be importing umd-polyfill.js from that path \"self\" is passed the\n   * decorator so the default value will not be used (because browsers that define\n   * fetch also has Request). One quirky setup where self.fetch exists but\n   * self.Request does not is when the \"unfetch\" minimal fetch polyfill is used\n   * on top of IE11; for this case the browser will try to use the fetch.Request\n   * default value which in turn will be undefined but then then \"if (Request)\"\n   * will ensure that you get a patched fetch but still no Request (as expected).\n   * @param {fetch, Request = fetch.Request}\n   * @returns {fetch: abortableFetch, Request: AbortableRequest}\n   */\n\n  function abortableFetchDecorator(patchTargets) {\n    if ('function' === typeof patchTargets) {\n      patchTargets = {\n        fetch: patchTargets\n      };\n    }\n\n    var _patchTargets = patchTargets,\n        fetch = _patchTargets.fetch,\n        _patchTargets$Request = _patchTargets.Request,\n        NativeRequest = _patchTargets$Request === void 0 ? fetch.Request : _patchTargets$Request,\n        NativeAbortController = _patchTargets.AbortController,\n        _patchTargets$__FORCE = _patchTargets.__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL,\n        __FORCE_INSTALL_ABORTCONTROLLER_POLYFILL = _patchTargets$__FORCE === void 0 ? false : _patchTargets$__FORCE;\n\n    if (!polyfillNeeded({\n      fetch: fetch,\n      Request: NativeRequest,\n      AbortController: NativeAbortController,\n      __FORCE_INSTALL_ABORTCONTROLLER_POLYFILL: __FORCE_INSTALL_ABORTCONTROLLER_POLYFILL\n    })) {\n      return {\n        fetch: fetch,\n        Request: Request\n      };\n    }\n\n    var Request = NativeRequest; // Note that the \"unfetch\" minimal fetch polyfill defines fetch() without\n    // defining window.Request, and this polyfill need to work on top of unfetch\n    // hence we only patch it if it's available. Also we don't patch it if signal\n    // is already available on the Request prototype because in this case support\n    // is present and the patching below can cause a crash since it assigns to\n    // request.signal which is technically a read-only property. This latter error\n    // happens when you run the main5.js node-fetch example in the repo\n    // \"abortcontroller-polyfill-examples\". The exact error is:\n    //   request.signal = init.signal;\n    //   ^\n    // TypeError: Cannot set property signal of #<Request> which has only a getter\n\n    if (Request && !Request.prototype.hasOwnProperty('signal') || __FORCE_INSTALL_ABORTCONTROLLER_POLYFILL) {\n      Request = function Request(input, init) {\n        var signal;\n\n        if (init && init.signal) {\n          signal = init.signal; // Never pass init.signal to the native Request implementation when the polyfill has\n          // been installed because if we're running on top of a browser with a\n          // working native AbortController (i.e. the polyfill was installed due to\n          // __FORCE_INSTALL_ABORTCONTROLLER_POLYFILL being set), then passing our\n          // fake AbortSignal to the native fetch will trigger:\n          // TypeError: Failed to construct 'Request': member signal is not of type AbortSignal.\n\n          delete init.signal;\n        }\n\n        var request = new NativeRequest(input, init);\n\n        if (signal) {\n          Object.defineProperty(request, 'signal', {\n            writable: false,\n            enumerable: false,\n            configurable: true,\n            value: signal\n          });\n        }\n\n        return request;\n      };\n\n      Request.prototype = NativeRequest.prototype;\n    }\n\n    var realFetch = fetch;\n\n    var abortableFetch = function abortableFetch(input, init) {\n      var signal = Request && Request.prototype.isPrototypeOf(input) ? input.signal : init ? init.signal : undefined;\n\n      if (signal) {\n        var abortError;\n\n        try {\n          abortError = new DOMException('Aborted', 'AbortError');\n        } catch (err) {\n          // IE 11 does not support calling the DOMException constructor, use a\n          // regular error object on it instead.\n          abortError = new Error('Aborted');\n          abortError.name = 'AbortError';\n        } // Return early if already aborted, thus avoiding making an HTTP request\n\n\n        if (signal.aborted) {\n          return Promise.reject(abortError);\n        } // Turn an event into a promise, reject it once `abort` is dispatched\n\n\n        var cancellation = new Promise(function (_, reject) {\n          signal.addEventListener('abort', function () {\n            return reject(abortError);\n          }, {\n            once: true\n          });\n        });\n\n        if (init && init.signal) {\n          // Never pass .signal to the native implementation when the polyfill has\n          // been installed because if we're running on top of a browser with a\n          // working native AbortController (i.e. the polyfill was installed due to\n          // __FORCE_INSTALL_ABORTCONTROLLER_POLYFILL being set), then passing our\n          // fake AbortSignal to the native fetch will trigger:\n          // TypeError: Failed to execute 'fetch' on 'Window': member signal is not of type AbortSignal.\n          delete init.signal;\n        } // Return the fastest promise (don't need to wait for request to finish)\n\n\n        return Promise.race([cancellation, realFetch(input, init)]);\n      }\n\n      return realFetch(input, init);\n    };\n\n    return {\n      fetch: abortableFetch,\n      Request: Request\n    };\n  }\n\n  (function (self) {\n\n    if (!polyfillNeeded(self)) {\n      return;\n    }\n\n    if (!self.fetch) {\n      console.warn('fetch() is not available, cannot install abortcontroller-polyfill');\n      return;\n    }\n\n    var _abortableFetch = abortableFetchDecorator(self),\n        fetch = _abortableFetch.fetch,\n        Request = _abortableFetch.Request;\n\n    self.fetch = fetch;\n    self.Request = Request;\n    Object.defineProperty(self, 'AbortController', {\n      writable: true,\n      enumerable: false,\n      configurable: true,\n      value: AbortController\n    });\n    Object.defineProperty(self, 'AbortSignal', {\n      writable: true,\n      enumerable: false,\n      configurable: true,\n      value: AbortSignal\n    });\n  })(typeof self !== 'undefined' ? self : commonjsGlobal);\n\n})));\n\n// https://bugs.webkit.org/show_bug.cgi?id=174980\n\ntry {\n  new window.EventTarget();\n} catch (error) {\n  window.EventTarget = EventTarget$1;\n}\n\nclass AssertionError extends Error {\n}\nconst assert = (condition, description) => {\n    if (!condition) {\n        const message = `Assertion failed${description !== undefined ? `: ${description}` : '.'}`;\n        throw new AssertionError(message);\n    }\n};\n\nclass UIHandler extends EventTarget {\n    constructor(naja) {\n        super();\n        this.naja = naja;\n        this.selector = '.ajax';\n        this.allowedOrigins = [window.location.origin];\n        this.handler = this.handleUI.bind(this);\n        naja.addEventListener('init', this.initialize.bind(this));\n    }\n    initialize() {\n        this.bindUI(window.document.body);\n        this.naja.snippetHandler.addEventListener('afterUpdate', (event) => {\n            const { snippet } = event.detail;\n            this.bindUI(snippet);\n        });\n    }\n    bindUI(element) {\n        const selectors = [\n            `a${this.selector}`,\n            `input[type=\"submit\"]${this.selector}`,\n            `input[type=\"image\"]${this.selector}`,\n            `button[type=\"submit\"]${this.selector}`,\n            `form${this.selector} input[type=\"submit\"]`,\n            `form${this.selector} input[type=\"image\"]`,\n            `form${this.selector} button[type=\"submit\"]`,\n        ].join(', ');\n        const bindElement = (element) => {\n            element.removeEventListener('click', this.handler);\n            element.addEventListener('click', this.handler);\n        };\n        const elements = element.querySelectorAll(selectors);\n        for (let i = 0; i < elements.length; i++) {\n            bindElement(elements.item(i));\n        }\n        if (element.matches(selectors)) {\n            bindElement(element);\n        }\n        const bindForm = (form) => {\n            form.removeEventListener('submit', this.handler);\n            form.addEventListener('submit', this.handler);\n        };\n        if (element.matches(`form${this.selector}`)) {\n            bindForm(element);\n        }\n        const forms = element.querySelectorAll(`form${this.selector}`);\n        for (let i = 0; i < forms.length; i++) {\n            bindForm(forms.item(i));\n        }\n    }\n    handleUI(event) {\n        const mouseEvent = event;\n        if (mouseEvent.altKey || mouseEvent.ctrlKey || mouseEvent.shiftKey || mouseEvent.metaKey || mouseEvent.button) {\n            return;\n        }\n        const element = event.currentTarget;\n        const options = {};\n        const ignoreErrors = () => {\n            // don't reject the promise in case of an error as developers have no way of handling the rejection\n            // in this situation; errors should be handled in `naja.addEventListener('error', errorHandler)`\n        };\n        if (event.type === 'submit') {\n            this.submitForm(element, options, event).catch(ignoreErrors);\n        }\n        else if (event.type === 'click') {\n            this.clickElement(element, options, mouseEvent).catch(ignoreErrors);\n        }\n    }\n    async clickElement(element, options = {}, event) {\n        var _a, _b, _c, _d, _e, _f;\n        let method = 'GET', url = '', data;\n        if (!this.dispatchEvent(new CustomEvent('interaction', { cancelable: true, detail: { element, originalEvent: event, options } }))) {\n            event === null || event === void 0 ? void 0 : event.preventDefault();\n            return {};\n        }\n        if (element.tagName === 'A') {\n            assert(element instanceof HTMLAnchorElement);\n            method = 'GET';\n            url = element.href;\n            data = null;\n        }\n        else if (element.tagName === 'INPUT' || element.tagName === 'BUTTON') {\n            assert(element instanceof HTMLInputElement || element instanceof HTMLButtonElement);\n            const { form } = element;\n            // eslint-disable-next-line no-nested-ternary,no-extra-parens\n            method = (_d = (_b = (_a = element.getAttribute('formmethod')) === null || _a === void 0 ? void 0 : _a.toUpperCase()) !== null && _b !== void 0 ? _b : (_c = form === null || form === void 0 ? void 0 : form.getAttribute('method')) === null || _c === void 0 ? void 0 : _c.toUpperCase()) !== null && _d !== void 0 ? _d : 'GET';\n            url = (_f = (_e = element.getAttribute('formaction')) !== null && _e !== void 0 ? _e : form === null || form === void 0 ? void 0 : form.getAttribute('action')) !== null && _f !== void 0 ? _f : window.location.pathname + window.location.search;\n            data = new FormData(form !== null && form !== void 0 ? form : undefined);\n            if (element.type === 'submit' || element.tagName === 'BUTTON') {\n                data.append(element.name, element.value || '');\n            }\n            else if (element.type === 'image') {\n                const coords = element.getBoundingClientRect();\n                data.append(`${element.name}.x`, Math.max(0, Math.floor(event !== undefined ? event.pageX - coords.left : 0)));\n                data.append(`${element.name}.y`, Math.max(0, Math.floor(event !== undefined ? event.pageY - coords.top : 0)));\n            }\n        }\n        if (!this.isUrlAllowed(url)) {\n            throw new Error(`Cannot dispatch async request, URL is not allowed: ${url}`);\n        }\n        event === null || event === void 0 ? void 0 : event.preventDefault();\n        return this.naja.makeRequest(method, url, data, options);\n    }\n    async submitForm(form, options = {}, event) {\n        var _a, _b, _c;\n        if (!this.dispatchEvent(new CustomEvent('interaction', { cancelable: true, detail: { element: form, originalEvent: event, options } }))) {\n            event === null || event === void 0 ? void 0 : event.preventDefault();\n            return {};\n        }\n        const method = (_b = (_a = form.getAttribute('method')) === null || _a === void 0 ? void 0 : _a.toUpperCase()) !== null && _b !== void 0 ? _b : 'GET';\n        const url = (_c = form.getAttribute('action')) !== null && _c !== void 0 ? _c : window.location.pathname + window.location.search;\n        const data = new FormData(form);\n        if (!this.isUrlAllowed(url)) {\n            throw new Error(`Cannot dispatch async request, URL is not allowed: ${url}`);\n        }\n        event === null || event === void 0 ? void 0 : event.preventDefault();\n        return this.naja.makeRequest(method, url, data, options);\n    }\n    isUrlAllowed(url) {\n        const urlObject = new URL(url, location.href);\n        // ignore non-URL URIs (javascript:, data:, mailto:, ...)\n        if (urlObject.origin === 'null') {\n            return false;\n        }\n        return this.allowedOrigins.includes(urlObject.origin);\n    }\n}\n\nclass FormsHandler {\n    constructor(naja) {\n        this.naja = naja;\n        naja.addEventListener('init', this.initialize.bind(this));\n        naja.uiHandler.addEventListener('interaction', this.processForm.bind(this));\n    }\n    initialize() {\n        this.initForms(window.document.body);\n        this.naja.snippetHandler.addEventListener('afterUpdate', (event) => {\n            const { snippet } = event.detail;\n            this.initForms(snippet);\n        });\n    }\n    initForms(element) {\n        const netteForms = this.netteForms || window.Nette;\n        if (netteForms) {\n            if (element.tagName === 'form') {\n                netteForms.initForm(element);\n            }\n            const forms = element.querySelectorAll('form');\n            for (let i = 0; i < forms.length; i++) {\n                netteForms.initForm(forms.item(i));\n            }\n        }\n    }\n    processForm(event) {\n        const { element, originalEvent } = event.detail;\n        const inputElement = element;\n        if (inputElement.form !== undefined && inputElement.form !== null) {\n            inputElement.form['nette-submittedBy'] = element;\n        }\n        const netteForms = this.netteForms || window.Nette;\n        if ((element.tagName === 'FORM' || element.form) && netteForms && !netteForms.validateForm(element)) {\n            if (originalEvent) {\n                originalEvent.stopImmediatePropagation();\n                originalEvent.preventDefault();\n            }\n            event.preventDefault();\n        }\n    }\n}\n\nclass RedirectHandler extends EventTarget {\n    constructor(naja) {\n        super();\n        this.naja = naja;\n        naja.uiHandler.addEventListener('interaction', (event) => {\n            var _a, _b, _c;\n            const { element, options } = event.detail;\n            if (!element) {\n                return;\n            }\n            if (element.hasAttribute('data-naja-force-redirect') || ((_a = element.form) === null || _a === void 0 ? void 0 : _a.hasAttribute('data-naja-force-redirect'))) {\n                const value = (_b = element.getAttribute('data-naja-force-redirect')) !== null && _b !== void 0 ? _b : (_c = element.form) === null || _c === void 0 ? void 0 : _c.getAttribute('data-naja-force-redirect');\n                options.forceRedirect = value !== 'off';\n            }\n        });\n        naja.addEventListener('success', (event) => {\n            var _a;\n            const { payload, options } = event.detail;\n            if (payload.redirect) {\n                this.makeRedirect(payload.redirect, (_a = options.forceRedirect) !== null && _a !== void 0 ? _a : false, options);\n                event.stopImmediatePropagation();\n            }\n        });\n        this.locationAdapter = {\n            assign: (url) => window.location.assign(url),\n        };\n    }\n    makeRedirect(url, force, options = {}) {\n        if (url instanceof URL) {\n            url = url.href;\n        }\n        let isHardRedirect = force || !this.naja.uiHandler.isUrlAllowed(url);\n        const canRedirect = this.dispatchEvent(new CustomEvent('redirect', {\n            cancelable: true,\n            detail: {\n                url,\n                isHardRedirect,\n                setHardRedirect(value) {\n                    isHardRedirect = !!value;\n                },\n                options,\n            },\n        }));\n        if (!canRedirect) {\n            return;\n        }\n        if (isHardRedirect) {\n            this.locationAdapter.assign(url);\n        }\n        else {\n            this.naja.makeRequest('GET', url, null, options);\n        }\n    }\n}\n\nclass SnippetHandler extends EventTarget {\n    constructor(naja) {\n        super();\n        this.naja = naja;\n        this.op = {\n            replace: (snippet, content) => {\n                snippet.innerHTML = content;\n            },\n            prepend: (snippet, content) => snippet.insertAdjacentHTML('afterbegin', content),\n            append: (snippet, content) => snippet.insertAdjacentHTML('beforeend', content),\n        };\n        naja.addEventListener('success', (event) => {\n            const { options, payload } = event.detail;\n            if (payload.snippets) {\n                this.updateSnippets(payload.snippets, false, options);\n            }\n        });\n    }\n    updateSnippets(snippets, fromCache = false, options = {}) {\n        Object.keys(snippets).forEach((id) => {\n            const snippet = document.getElementById(id);\n            if (snippet) {\n                this.updateSnippet(snippet, snippets[id], fromCache, options);\n            }\n        });\n    }\n    updateSnippet(snippet, content, fromCache, options) {\n        let operation = this.op.replace;\n        if ((snippet.hasAttribute('data-naja-snippet-prepend') || snippet.hasAttribute('data-ajax-prepend')) && !fromCache) {\n            operation = this.op.prepend;\n        }\n        else if ((snippet.hasAttribute('data-naja-snippet-append') || snippet.hasAttribute('data-ajax-append')) && !fromCache) {\n            operation = this.op.append;\n        }\n        const canUpdate = this.dispatchEvent(new CustomEvent('beforeUpdate', {\n            cancelable: true,\n            detail: {\n                snippet,\n                content,\n                fromCache,\n                operation,\n                changeOperation(value) {\n                    operation = value;\n                },\n                options,\n            },\n        }));\n        if (!canUpdate) {\n            return;\n        }\n        if (snippet.tagName.toLowerCase() === 'title') {\n            document.title = content;\n        }\n        else {\n            operation(snippet, content);\n        }\n        this.dispatchEvent(new CustomEvent('afterUpdate', {\n            cancelable: true,\n            detail: {\n                snippet,\n                content,\n                fromCache,\n                operation,\n                options,\n            },\n        }));\n    }\n}\n\nclass HistoryHandler {\n    constructor(naja) {\n        this.naja = naja;\n        this.href = null;\n        this.popStateHandler = this.handlePopState.bind(this);\n        this.uiCache = true;\n        naja.addEventListener('init', this.initialize.bind(this));\n        naja.addEventListener('before', this.saveUrl.bind(this));\n        naja.addEventListener('success', this.pushNewState.bind(this));\n        naja.uiHandler.addEventListener('interaction', this.configureMode.bind(this));\n        this.historyAdapter = {\n            replaceState: (data, title, url) => window.history.replaceState(data, title, url),\n            pushState: (data, title, url) => window.history.pushState(data, title, url),\n        };\n    }\n    initialize(event) {\n        const { defaultOptions } = event.detail;\n        if ('historyUiCache' in defaultOptions && defaultOptions.historyUiCache !== undefined) {\n            this.uiCache = defaultOptions.historyUiCache;\n        }\n        window.addEventListener('popstate', this.popStateHandler);\n        this.historyAdapter.replaceState(this.buildState(window.location.href, this.uiCache), window.document.title, window.location.href);\n    }\n    handlePopState(e) {\n        if (!e.state) {\n            return;\n        }\n        if (e.state.ui) {\n            this.handleSnippets(e.state.ui);\n            this.handleTitle(e.state.title);\n        }\n        else if (e.state.ui === false) {\n            this.naja.makeRequest('GET', e.state.href, null, {\n                history: false,\n                historyUiCache: false,\n            });\n        }\n    }\n    saveUrl(event) {\n        const { url } = event.detail;\n        this.href = url;\n    }\n    configureMode(event) {\n        var _a, _b, _c, _d, _e, _f;\n        const { element, options } = event.detail;\n        // propagate mode to options\n        if (!element) {\n            return;\n        }\n        if (element.hasAttribute('data-naja-history') || ((_a = element.form) === null || _a === void 0 ? void 0 : _a.hasAttribute('data-naja-history'))) {\n            const value = (_b = element.getAttribute('data-naja-history')) !== null && _b !== void 0 ? _b : (_c = element.form) === null || _c === void 0 ? void 0 : _c.getAttribute('data-naja-history');\n            options.history = HistoryHandler.normalizeMode(value);\n        }\n        if (element.hasAttribute('data-naja-history-cache') || ((_d = element.form) === null || _d === void 0 ? void 0 : _d.hasAttribute('data-naja-history-nocache'))) {\n            const value = (_e = element.getAttribute('data-naja-history-cache')) !== null && _e !== void 0 ? _e : (_f = element.form) === null || _f === void 0 ? void 0 : _f.getAttribute('data-naja-history-cache');\n            options.historyUiCache = value !== 'off';\n        }\n    }\n    static normalizeMode(mode) {\n        if (mode === 'off' || mode === false) {\n            return false;\n        }\n        else if (mode === 'replace') {\n            return 'replace';\n        }\n        return true;\n    }\n    pushNewState(event) {\n        const { payload, options } = event.detail;\n        const mode = HistoryHandler.normalizeMode(options.history);\n        if (mode === false) {\n            return;\n        }\n        if (payload.postGet && payload.url) {\n            this.href = payload.url;\n        }\n        const method = mode === 'replace' ? 'replaceState' : 'pushState';\n        const uiCache = options.historyUiCache === true || (options.historyUiCache !== false && this.uiCache); // eslint-disable-line no-extra-parens\n        this.historyAdapter[method](this.buildState(this.href, uiCache), window.document.title, this.href);\n        this.href = null;\n    }\n    buildState(href, uiCache) {\n        const state = {\n            href,\n        };\n        if (uiCache) {\n            state.title = window.document.title;\n            state.ui = this.findSnippets();\n        }\n        else {\n            state.ui = false;\n        }\n        return state;\n    }\n    findSnippets() {\n        const result = {};\n        const snippets = window.document.querySelectorAll('[id^=\"snippet-\"]');\n        for (let i = 0; i < snippets.length; i++) {\n            const snippet = snippets.item(i);\n            if (!snippet.hasAttribute('data-naja-history-nocache') && !snippet.hasAttribute('data-history-nocache')) {\n                result[snippet.id] = snippet.innerHTML;\n            }\n        }\n        return result;\n    }\n    handleSnippets(snippets) {\n        this.naja.snippetHandler.updateSnippets(snippets, true);\n        this.naja.scriptLoader.loadScripts(snippets);\n    }\n    handleTitle(title) {\n        window.document.title = title;\n    }\n}\n\nclass ScriptLoader {\n    constructor(naja) {\n        naja.addEventListener('success', (event) => {\n            const { payload } = event.detail;\n            if (payload.snippets) {\n                this.loadScripts(payload.snippets);\n            }\n        });\n    }\n    loadScripts(snippets) {\n        Object.keys(snippets).forEach((id) => {\n            const content = snippets[id];\n            if (!/<script/i.test(content)) {\n                return;\n            }\n            const el = window.document.createElement('div');\n            el.innerHTML = content;\n            const scripts = el.querySelectorAll('script');\n            for (let i = 0; i < scripts.length; i++) {\n                const script = scripts.item(i);\n                const scriptEl = window.document.createElement('script');\n                scriptEl.innerHTML = script.innerHTML;\n                if (script.hasAttributes()) {\n                    const attrs = script.attributes;\n                    for (let j = 0; j < attrs.length; j++) {\n                        const attrName = attrs[j].name;\n                        scriptEl.setAttribute(attrName, attrs[j].value);\n                    }\n                }\n                window.document.head.appendChild(scriptEl)\n                    .parentNode.removeChild(scriptEl);\n            }\n        });\n    }\n}\n\nclass Naja extends EventTarget {\n    constructor(uiHandler, redirectHandler, snippetHandler, formsHandler, historyHandler, scriptLoader) {\n        super();\n        this.VERSION = 2;\n        this.initialized = false;\n        this.extensions = [];\n        this.defaultOptions = {};\n        this.uiHandler = uiHandler ? new uiHandler(this) : new UIHandler(this);\n        this.redirectHandler = redirectHandler ? new redirectHandler(this) : new RedirectHandler(this);\n        this.snippetHandler = snippetHandler ? new snippetHandler(this) : new SnippetHandler(this);\n        this.formsHandler = formsHandler ? new formsHandler(this) : new FormsHandler(this);\n        this.historyHandler = historyHandler ? new historyHandler(this) : new HistoryHandler(this);\n        this.scriptLoader = scriptLoader ? new scriptLoader(this) : new ScriptLoader(this);\n    }\n    registerExtension(extension) {\n        if (this.initialized) {\n            extension.initialize(this);\n        }\n        this.extensions.push(extension);\n    }\n    initialize(defaultOptions = {}) {\n        if (this.initialized) {\n            throw new Error('Cannot initialize Naja, it is already initialized.');\n        }\n        this.defaultOptions = defaultOptions;\n        this.extensions.forEach((extension) => extension.initialize(this));\n        this.dispatchEvent(new CustomEvent('init', { detail: { defaultOptions } }));\n        this.initialized = true;\n    }\n    async makeRequest(method, url, data = null, options = {}) {\n        // normalize url to instanceof URL\n        if (typeof url === 'string') {\n            url = new URL(url, location.href);\n        }\n        options = Object.assign(Object.assign(Object.assign({}, this.defaultOptions), options), { fetch: Object.assign(Object.assign({}, this.defaultOptions.fetch || {}), options.fetch || {}) });\n        const headers = new Headers(options.fetch.headers || {});\n        const body = this.transformData(url, method, data);\n        const abortController = new AbortController();\n        const request = new Request(url.toString(), Object.assign(Object.assign({ credentials: 'same-origin' }, options.fetch), { method,\n            headers,\n            body, signal: abortController.signal }));\n        // impersonate XHR so that Nette can detect isAjax()\n        request.headers.set('X-Requested-With', 'XMLHttpRequest');\n        if (!this.dispatchEvent(new CustomEvent('before', { cancelable: true, detail: { request, method, url: url.toString(), data, options } }))) {\n            return {};\n        }\n        const promise = window.fetch(request);\n        this.dispatchEvent(new CustomEvent('start', { detail: { request, promise, abortController, options } }));\n        let response, payload;\n        try {\n            response = await promise;\n            if (!response.ok) {\n                throw new HttpError(response);\n            }\n            payload = await response.json();\n        }\n        catch (error) {\n            if (error.name === 'AbortError') {\n                this.dispatchEvent(new CustomEvent('abort', { detail: { request, error, options } }));\n                this.dispatchEvent(new CustomEvent('complete', { detail: { request, response, payload: undefined, error, options } }));\n                return {};\n            }\n            this.dispatchEvent(new CustomEvent('error', { detail: { request, response, error, options } }));\n            this.dispatchEvent(new CustomEvent('complete', { detail: { request, response, payload: undefined, error, options } }));\n            throw error;\n        }\n        this.dispatchEvent(new CustomEvent('success', { detail: { request, response, payload, options } }));\n        this.dispatchEvent(new CustomEvent('complete', { detail: { request, response, payload, error: undefined, options } }));\n        return payload;\n    }\n    appendToQueryString(searchParams, key, value) {\n        if (value === null || value === undefined) {\n            return;\n        }\n        if (Array.isArray(value)) {\n            let index = 0;\n            for (const subvalue of value) {\n                this.appendToQueryString(searchParams, `${key}[${index++}]`, subvalue);\n            }\n        }\n        else if (Object.getPrototypeOf(value) === Object.prototype) {\n            for (const [subkey, subvalue] of Object.entries(value)) {\n                this.appendToQueryString(searchParams, `${key}[${subkey}]`, subvalue);\n            }\n        }\n        else {\n            searchParams.append(key, String(value));\n        }\n    }\n    transformData(url, method, data) {\n        const isGet = ['GET', 'HEAD'].includes(method.toUpperCase());\n        // sending a form via GET -> serialize FormData into URL and return empty request body\n        if (isGet && data instanceof FormData) {\n            for (const [key, value] of data) {\n                if (value !== null && value !== undefined) {\n                    url.searchParams.append(key, String(value));\n                }\n            }\n            return null;\n        }\n        // sending a POJO -> serialize it recursively into URLSearchParams\n        const isDataPojo = data !== null && Object.getPrototypeOf(data) === Object.prototype;\n        if (isDataPojo) {\n            // for GET requests, append values to URL and return empty request body\n            // otherwise build `new URLSearchParams()` to act as the request body\n            const transformedData = isGet ? url.searchParams : new URLSearchParams();\n            for (const [key, value] of Object.entries(data)) {\n                this.appendToQueryString(transformedData, key, value);\n            }\n            return isGet\n                ? null\n                : transformedData;\n        }\n        return data;\n    }\n}\nclass HttpError extends Error {\n    constructor(response) {\n        const message = `HTTP ${response.status}: ${response.statusText}`;\n        super(message);\n        this.name = this.constructor.name;\n        this.stack = new Error(message).stack;\n        this.response = response;\n    }\n}\n\nclass AbortExtension {\n    constructor() {\n        this.abortable = true;\n        this.abortController = null;\n    }\n    initialize(naja) {\n        naja.uiHandler.addEventListener('interaction', this.checkAbortable.bind(this));\n        naja.addEventListener('init', this.onInitialize.bind(this));\n        naja.addEventListener('before', this.checkAbortable.bind(this));\n        naja.addEventListener('start', this.saveAbortController.bind(this));\n        naja.addEventListener('complete', this.clearAbortController.bind(this));\n    }\n    onInitialize() {\n        document.addEventListener('keydown', (event) => {\n            if (this.abortController !== null\n                && event.key === 'Escape'\n                && !(event.ctrlKey || event.shiftKey || event.altKey || event.metaKey)\n                && this.abortable) {\n                this.abortController.abort();\n                this.abortController = null;\n            }\n        });\n    }\n    checkAbortable(event) {\n        var _a, _b;\n        const { options } = event.detail;\n        this.abortable = 'element' in event.detail\n            ? ((_a = event.detail.element.getAttribute('data-naja-abort')) !== null && _a !== void 0 ? _a : (_b = event.detail.element.form) === null || _b === void 0 ? void 0 : _b.getAttribute('data-naja-abort')) !== 'off' // eslint-disable-line no-extra-parens\n            : options.abort !== false;\n        // propagate to options if called in interaction event\n        options.abort = this.abortable;\n    }\n    saveAbortController(event) {\n        const { abortController } = event.detail;\n        this.abortController = abortController;\n    }\n    clearAbortController() {\n        this.abortController = null;\n        this.abortable = true;\n    }\n}\n\nclass UniqueExtension {\n    constructor() {\n        this.abortControllers = new Map();\n    }\n    initialize(naja) {\n        naja.uiHandler.addEventListener('interaction', this.checkUniqueness.bind(this));\n        naja.addEventListener('start', this.abortPreviousRequest.bind(this));\n        naja.addEventListener('complete', this.clearRequest.bind(this));\n    }\n    checkUniqueness(event) {\n        var _a, _b;\n        const { element, options } = event.detail;\n        const unique = (_a = element.getAttribute('data-naja-unique')) !== null && _a !== void 0 ? _a : (_b = element.form) === null || _b === void 0 ? void 0 : _b.getAttribute('data-naja-unique');\n        options.unique = unique === 'off' ? false : unique !== null && unique !== void 0 ? unique : 'default';\n    }\n    abortPreviousRequest(event) {\n        var _a, _b, _c;\n        const { abortController, options } = event.detail;\n        if (options.unique !== false) {\n            (_b = this.abortControllers.get((_a = options.unique) !== null && _a !== void 0 ? _a : 'default')) === null || _b === void 0 ? void 0 : _b.abort();\n            this.abortControllers.set((_c = options.unique) !== null && _c !== void 0 ? _c : 'default', abortController);\n        }\n    }\n    clearRequest(event) {\n        var _a;\n        const { request, options } = event.detail;\n        if (!request.signal.aborted && options.unique !== false) {\n            this.abortControllers.delete((_a = options.unique) !== null && _a !== void 0 ? _a : 'default');\n        }\n    }\n}\n\nconst naja = new Naja();\nnaja.registerExtension(new AbortExtension());\nnaja.registerExtension(new UniqueExtension());\n\nexport default naja;\nexport { HttpError, Naja };\n//# sourceMappingURL=Naja.esm.js.map\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","'use strict';\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\n/**\n * Assert a condition.\n * @param condition The condition that it should satisfy.\n * @param message The error message.\n * @param args The arguments for replacing placeholders in the message.\n */\nfunction assertType(condition, message, ...args) {\n    if (!condition) {\n        throw new TypeError(format(message, args));\n    }\n}\n/**\n * Convert a text and arguments to one string.\n * @param message The formating text\n * @param args The arguments.\n */\nfunction format(message, args) {\n    let i = 0;\n    return message.replace(/%[os]/gu, () => anyToString(args[i++]));\n}\n/**\n * Convert a value to a string representation.\n * @param x The value to get the string representation.\n */\nfunction anyToString(x) {\n    if (typeof x !== \"object\" || x === null) {\n        return String(x);\n    }\n    return Object.prototype.toString.call(x);\n}\n\nlet currentErrorHandler;\n/**\n * Set the error handler.\n * @param value The error handler to set.\n */\nfunction setErrorHandler(value) {\n    assertType(typeof value === \"function\" || value === undefined, \"The error handler must be a function or undefined, but got %o.\", value);\n    currentErrorHandler = value;\n}\n/**\n * Print a error message.\n * @param maybeError The error object.\n */\nfunction reportError(maybeError) {\n    try {\n        const error = maybeError instanceof Error\n            ? maybeError\n            : new Error(anyToString(maybeError));\n        // Call the user-defined error handler if exists.\n        if (currentErrorHandler) {\n            currentErrorHandler(error);\n            return;\n        }\n        // Dispatch an `error` event if this is on a browser.\n        if (typeof dispatchEvent === \"function\" &&\n            typeof ErrorEvent === \"function\") {\n            dispatchEvent(new ErrorEvent(\"error\", { error, message: error.message }));\n        }\n        // Emit an `uncaughtException` event if this is on Node.js.\n        //istanbul ignore else\n        else if (typeof process !== \"undefined\" &&\n            typeof process.emit === \"function\") {\n            process.emit(\"uncaughtException\", error);\n            return;\n        }\n        // Otherwise, print the error.\n        console.error(error);\n    }\n    catch (_a) {\n        // ignore.\n    }\n}\n\n/**\n * The global object.\n */\n//istanbul ignore next\nconst Global = typeof window !== \"undefined\"\n    ? window\n    : typeof self !== \"undefined\"\n        ? self\n        : typeof global !== \"undefined\"\n            ? global\n            : typeof globalThis !== \"undefined\"\n                ? globalThis\n                : undefined;\n\nlet currentWarnHandler;\n/**\n * Set the warning handler.\n * @param value The warning handler to set.\n */\nfunction setWarningHandler(value) {\n    assertType(typeof value === \"function\" || value === undefined, \"The warning handler must be a function or undefined, but got %o.\", value);\n    currentWarnHandler = value;\n}\n/**\n * The warning information.\n */\nclass Warning {\n    constructor(code, message) {\n        this.code = code;\n        this.message = message;\n    }\n    /**\n     * Report this warning.\n     * @param args The arguments of the warning.\n     */\n    warn(...args) {\n        var _a;\n        try {\n            // Call the user-defined warning handler if exists.\n            if (currentWarnHandler) {\n                currentWarnHandler({ ...this, args });\n                return;\n            }\n            // Otherwise, print the warning.\n            const stack = ((_a = new Error().stack) !== null && _a !== void 0 ? _a : \"\").replace(/^(?:.+?\\n){2}/gu, \"\\n\");\n            console.warn(this.message, ...args, stack);\n        }\n        catch (_b) {\n            // Ignore.\n        }\n    }\n}\n\nconst InitEventWasCalledWhileDispatching = new Warning(\"W01\", \"Unable to initialize event under dispatching.\");\nconst FalsyWasAssignedToCancelBubble = new Warning(\"W02\", \"Assigning any falsy value to 'cancelBubble' property has no effect.\");\nconst TruthyWasAssignedToReturnValue = new Warning(\"W03\", \"Assigning any truthy value to 'returnValue' property has no effect.\");\nconst NonCancelableEventWasCanceled = new Warning(\"W04\", \"Unable to preventDefault on non-cancelable events.\");\nconst CanceledInPassiveListener = new Warning(\"W05\", \"Unable to preventDefault inside passive event listener invocation.\");\nconst EventListenerWasDuplicated = new Warning(\"W06\", \"An event listener wasn't added because it has been added already: %o, %o\");\nconst OptionWasIgnored = new Warning(\"W07\", \"The %o option value was abandoned because the event listener wasn't added as duplicated.\");\nconst InvalidEventListener = new Warning(\"W08\", \"The 'callback' argument must be a function or an object that has 'handleEvent' method: %o\");\nconst InvalidAttributeHandler = new Warning(\"W09\", \"Event attribute handler must be a function: %o\");\n\n/*eslint-disable class-methods-use-this */\n/**\n * An implementation of `Event` interface, that wraps a given event object.\n * `EventTarget` shim can control the internal state of this `Event` objects.\n * @see https://dom.spec.whatwg.org/#event\n */\nclass Event {\n    /**\n     * @see https://dom.spec.whatwg.org/#dom-event-none\n     */\n    static get NONE() {\n        return NONE;\n    }\n    /**\n     * @see https://dom.spec.whatwg.org/#dom-event-capturing_phase\n     */\n    static get CAPTURING_PHASE() {\n        return CAPTURING_PHASE;\n    }\n    /**\n     * @see https://dom.spec.whatwg.org/#dom-event-at_target\n     */\n    static get AT_TARGET() {\n        return AT_TARGET;\n    }\n    /**\n     * @see https://dom.spec.whatwg.org/#dom-event-bubbling_phase\n     */\n    static get BUBBLING_PHASE() {\n        return BUBBLING_PHASE;\n    }\n    /**\n     * Initialize this event instance.\n     * @param type The type of this event.\n     * @param eventInitDict Options to initialize.\n     * @see https://dom.spec.whatwg.org/#dom-event-event\n     */\n    constructor(type, eventInitDict) {\n        Object.defineProperty(this, \"isTrusted\", {\n            value: false,\n            enumerable: true,\n        });\n        const opts = eventInitDict !== null && eventInitDict !== void 0 ? eventInitDict : {};\n        internalDataMap.set(this, {\n            type: String(type),\n            bubbles: Boolean(opts.bubbles),\n            cancelable: Boolean(opts.cancelable),\n            composed: Boolean(opts.composed),\n            target: null,\n            currentTarget: null,\n            stopPropagationFlag: false,\n            stopImmediatePropagationFlag: false,\n            canceledFlag: false,\n            inPassiveListenerFlag: false,\n            dispatchFlag: false,\n            timeStamp: Date.now(),\n        });\n    }\n    /**\n     * The type of this event.\n     * @see https://dom.spec.whatwg.org/#dom-event-type\n     */\n    get type() {\n        return $(this).type;\n    }\n    /**\n     * The event target of the current dispatching.\n     * @see https://dom.spec.whatwg.org/#dom-event-target\n     */\n    get target() {\n        return $(this).target;\n    }\n    /**\n     * The event target of the current dispatching.\n     * @deprecated Use the `target` property instead.\n     * @see https://dom.spec.whatwg.org/#dom-event-srcelement\n     */\n    get srcElement() {\n        return $(this).target;\n    }\n    /**\n     * The event target of the current dispatching.\n     * @see https://dom.spec.whatwg.org/#dom-event-currenttarget\n     */\n    get currentTarget() {\n        return $(this).currentTarget;\n    }\n    /**\n     * The event target of the current dispatching.\n     * This doesn't support node tree.\n     * @see https://dom.spec.whatwg.org/#dom-event-composedpath\n     */\n    composedPath() {\n        const currentTarget = $(this).currentTarget;\n        if (currentTarget) {\n            return [currentTarget];\n        }\n        return [];\n    }\n    /**\n     * @see https://dom.spec.whatwg.org/#dom-event-none\n     */\n    get NONE() {\n        return NONE;\n    }\n    /**\n     * @see https://dom.spec.whatwg.org/#dom-event-capturing_phase\n     */\n    get CAPTURING_PHASE() {\n        return CAPTURING_PHASE;\n    }\n    /**\n     * @see https://dom.spec.whatwg.org/#dom-event-at_target\n     */\n    get AT_TARGET() {\n        return AT_TARGET;\n    }\n    /**\n     * @see https://dom.spec.whatwg.org/#dom-event-bubbling_phase\n     */\n    get BUBBLING_PHASE() {\n        return BUBBLING_PHASE;\n    }\n    /**\n     * The current event phase.\n     * @see https://dom.spec.whatwg.org/#dom-event-eventphase\n     */\n    get eventPhase() {\n        return $(this).dispatchFlag ? 2 : 0;\n    }\n    /**\n     * Stop event bubbling.\n     * Because this shim doesn't support node tree, this merely changes the `cancelBubble` property value.\n     * @see https://dom.spec.whatwg.org/#dom-event-stoppropagation\n     */\n    stopPropagation() {\n        $(this).stopPropagationFlag = true;\n    }\n    /**\n     * `true` if event bubbling was stopped.\n     * @deprecated\n     * @see https://dom.spec.whatwg.org/#dom-event-cancelbubble\n     */\n    get cancelBubble() {\n        return $(this).stopPropagationFlag;\n    }\n    /**\n     * Stop event bubbling if `true` is set.\n     * @deprecated Use the `stopPropagation()` method instead.\n     * @see https://dom.spec.whatwg.org/#dom-event-cancelbubble\n     */\n    set cancelBubble(value) {\n        if (value) {\n            $(this).stopPropagationFlag = true;\n        }\n        else {\n            FalsyWasAssignedToCancelBubble.warn();\n        }\n    }\n    /**\n     * Stop event bubbling and subsequent event listener callings.\n     * @see https://dom.spec.whatwg.org/#dom-event-stopimmediatepropagation\n     */\n    stopImmediatePropagation() {\n        const data = $(this);\n        data.stopPropagationFlag = data.stopImmediatePropagationFlag = true;\n    }\n    /**\n     * `true` if this event will bubble.\n     * @see https://dom.spec.whatwg.org/#dom-event-bubbles\n     */\n    get bubbles() {\n        return $(this).bubbles;\n    }\n    /**\n     * `true` if this event can be canceled by the `preventDefault()` method.\n     * @see https://dom.spec.whatwg.org/#dom-event-cancelable\n     */\n    get cancelable() {\n        return $(this).cancelable;\n    }\n    /**\n     * `true` if the default behavior will act.\n     * @deprecated Use the `defaultPrevented` proeprty instead.\n     * @see https://dom.spec.whatwg.org/#dom-event-returnvalue\n     */\n    get returnValue() {\n        return !$(this).canceledFlag;\n    }\n    /**\n     * Cancel the default behavior if `false` is set.\n     * @deprecated Use the `preventDefault()` method instead.\n     * @see https://dom.spec.whatwg.org/#dom-event-returnvalue\n     */\n    set returnValue(value) {\n        if (!value) {\n            setCancelFlag($(this));\n        }\n        else {\n            TruthyWasAssignedToReturnValue.warn();\n        }\n    }\n    /**\n     * Cancel the default behavior.\n     * @see https://dom.spec.whatwg.org/#dom-event-preventdefault\n     */\n    preventDefault() {\n        setCancelFlag($(this));\n    }\n    /**\n     * `true` if the default behavior was canceled.\n     * @see https://dom.spec.whatwg.org/#dom-event-defaultprevented\n     */\n    get defaultPrevented() {\n        return $(this).canceledFlag;\n    }\n    /**\n     * @see https://dom.spec.whatwg.org/#dom-event-composed\n     */\n    get composed() {\n        return $(this).composed;\n    }\n    /**\n     * @see https://dom.spec.whatwg.org/#dom-event-istrusted\n     */\n    //istanbul ignore next\n    get isTrusted() {\n        return false;\n    }\n    /**\n     * @see https://dom.spec.whatwg.org/#dom-event-timestamp\n     */\n    get timeStamp() {\n        return $(this).timeStamp;\n    }\n    /**\n     * @deprecated Don't use this method. The constructor did initialization.\n     */\n    initEvent(type, bubbles = false, cancelable = false) {\n        const data = $(this);\n        if (data.dispatchFlag) {\n            InitEventWasCalledWhileDispatching.warn();\n            return;\n        }\n        internalDataMap.set(this, {\n            ...data,\n            type: String(type),\n            bubbles: Boolean(bubbles),\n            cancelable: Boolean(cancelable),\n            target: null,\n            currentTarget: null,\n            stopPropagationFlag: false,\n            stopImmediatePropagationFlag: false,\n            canceledFlag: false,\n        });\n    }\n}\n//------------------------------------------------------------------------------\n// Helpers\n//------------------------------------------------------------------------------\nconst NONE = 0;\nconst CAPTURING_PHASE = 1;\nconst AT_TARGET = 2;\nconst BUBBLING_PHASE = 3;\n/**\n * Private data for event wrappers.\n */\nconst internalDataMap = new WeakMap();\n/**\n * Get private data.\n * @param event The event object to get private data.\n * @param name The variable name to report.\n * @returns The private data of the event.\n */\nfunction $(event, name = \"this\") {\n    const retv = internalDataMap.get(event);\n    assertType(retv != null, \"'%s' must be an object that Event constructor created, but got another one: %o\", name, event);\n    return retv;\n}\n/**\n * https://dom.spec.whatwg.org/#set-the-canceled-flag\n * @param data private data.\n */\nfunction setCancelFlag(data) {\n    if (data.inPassiveListenerFlag) {\n        CanceledInPassiveListener.warn();\n        return;\n    }\n    if (!data.cancelable) {\n        NonCancelableEventWasCanceled.warn();\n        return;\n    }\n    data.canceledFlag = true;\n}\n// Set enumerable\nObject.defineProperty(Event, \"NONE\", { enumerable: true });\nObject.defineProperty(Event, \"CAPTURING_PHASE\", { enumerable: true });\nObject.defineProperty(Event, \"AT_TARGET\", { enumerable: true });\nObject.defineProperty(Event, \"BUBBLING_PHASE\", { enumerable: true });\nconst keys = Object.getOwnPropertyNames(Event.prototype);\nfor (let i = 0; i < keys.length; ++i) {\n    if (keys[i] === \"constructor\") {\n        continue;\n    }\n    Object.defineProperty(Event.prototype, keys[i], { enumerable: true });\n}\n// Ensure `event instanceof window.Event` is `true`.\nif (typeof Global !== \"undefined\" && typeof Global.Event !== \"undefined\") {\n    Object.setPrototypeOf(Event.prototype, Global.Event.prototype);\n}\n\n/**\n * Create a new InvalidStateError instance.\n * @param message The error message.\n */\nfunction createInvalidStateError(message) {\n    if (Global.DOMException) {\n        return new Global.DOMException(message, \"InvalidStateError\");\n    }\n    if (DOMException == null) {\n        DOMException = class DOMException extends Error {\n            constructor(msg) {\n                super(msg);\n                if (Error.captureStackTrace) {\n                    Error.captureStackTrace(this, DOMException);\n                }\n            }\n            // eslint-disable-next-line class-methods-use-this\n            get code() {\n                return 11;\n            }\n            // eslint-disable-next-line class-methods-use-this\n            get name() {\n                return \"InvalidStateError\";\n            }\n        };\n        Object.defineProperties(DOMException.prototype, {\n            code: { enumerable: true },\n            name: { enumerable: true },\n        });\n        defineErrorCodeProperties(DOMException);\n        defineErrorCodeProperties(DOMException.prototype);\n    }\n    return new DOMException(message);\n}\n//------------------------------------------------------------------------------\n// Helpers\n//------------------------------------------------------------------------------\nlet DOMException;\nconst ErrorCodeMap = {\n    INDEX_SIZE_ERR: 1,\n    DOMSTRING_SIZE_ERR: 2,\n    HIERARCHY_REQUEST_ERR: 3,\n    WRONG_DOCUMENT_ERR: 4,\n    INVALID_CHARACTER_ERR: 5,\n    NO_DATA_ALLOWED_ERR: 6,\n    NO_MODIFICATION_ALLOWED_ERR: 7,\n    NOT_FOUND_ERR: 8,\n    NOT_SUPPORTED_ERR: 9,\n    INUSE_ATTRIBUTE_ERR: 10,\n    INVALID_STATE_ERR: 11,\n    SYNTAX_ERR: 12,\n    INVALID_MODIFICATION_ERR: 13,\n    NAMESPACE_ERR: 14,\n    INVALID_ACCESS_ERR: 15,\n    VALIDATION_ERR: 16,\n    TYPE_MISMATCH_ERR: 17,\n    SECURITY_ERR: 18,\n    NETWORK_ERR: 19,\n    ABORT_ERR: 20,\n    URL_MISMATCH_ERR: 21,\n    QUOTA_EXCEEDED_ERR: 22,\n    TIMEOUT_ERR: 23,\n    INVALID_NODE_TYPE_ERR: 24,\n    DATA_CLONE_ERR: 25,\n};\nfunction defineErrorCodeProperties(obj) {\n    const keys = Object.keys(ErrorCodeMap);\n    for (let i = 0; i < keys.length; ++i) {\n        const key = keys[i];\n        const value = ErrorCodeMap[key];\n        Object.defineProperty(obj, key, {\n            get() {\n                return value;\n            },\n            configurable: true,\n            enumerable: true,\n        });\n    }\n}\n\n/**\n * An implementation of `Event` interface, that wraps a given event object.\n * This class controls the internal state of `Event`.\n * @see https://dom.spec.whatwg.org/#interface-event\n */\nclass EventWrapper extends Event {\n    /**\n     * Wrap a given event object to control states.\n     * @param event The event-like object to wrap.\n     */\n    static wrap(event) {\n        return new (getWrapperClassOf(event))(event);\n    }\n    constructor(event) {\n        super(event.type, {\n            bubbles: event.bubbles,\n            cancelable: event.cancelable,\n            composed: event.composed,\n        });\n        if (event.cancelBubble) {\n            super.stopPropagation();\n        }\n        if (event.defaultPrevented) {\n            super.preventDefault();\n        }\n        internalDataMap$1.set(this, { original: event });\n        // Define accessors\n        const keys = Object.keys(event);\n        for (let i = 0; i < keys.length; ++i) {\n            const key = keys[i];\n            if (!(key in this)) {\n                Object.defineProperty(this, key, defineRedirectDescriptor(event, key));\n            }\n        }\n    }\n    stopPropagation() {\n        super.stopPropagation();\n        const { original } = $$1(this);\n        if (\"stopPropagation\" in original) {\n            original.stopPropagation();\n        }\n    }\n    get cancelBubble() {\n        return super.cancelBubble;\n    }\n    set cancelBubble(value) {\n        super.cancelBubble = value;\n        const { original } = $$1(this);\n        if (\"cancelBubble\" in original) {\n            original.cancelBubble = value;\n        }\n    }\n    stopImmediatePropagation() {\n        super.stopImmediatePropagation();\n        const { original } = $$1(this);\n        if (\"stopImmediatePropagation\" in original) {\n            original.stopImmediatePropagation();\n        }\n    }\n    get returnValue() {\n        return super.returnValue;\n    }\n    set returnValue(value) {\n        super.returnValue = value;\n        const { original } = $$1(this);\n        if (\"returnValue\" in original) {\n            original.returnValue = value;\n        }\n    }\n    preventDefault() {\n        super.preventDefault();\n        const { original } = $$1(this);\n        if (\"preventDefault\" in original) {\n            original.preventDefault();\n        }\n    }\n    get timeStamp() {\n        const { original } = $$1(this);\n        if (\"timeStamp\" in original) {\n            return original.timeStamp;\n        }\n        return super.timeStamp;\n    }\n}\n/**\n * Private data for event wrappers.\n */\nconst internalDataMap$1 = new WeakMap();\n/**\n * Get private data.\n * @param event The event object to get private data.\n * @returns The private data of the event.\n */\nfunction $$1(event) {\n    const retv = internalDataMap$1.get(event);\n    assertType(retv != null, \"'this' is expected an Event object, but got\", event);\n    return retv;\n}\n/**\n * Cache for wrapper classes.\n * @type {WeakMap<Object, Function>}\n * @private\n */\nconst wrapperClassCache = new WeakMap();\n// Make association for wrappers.\nwrapperClassCache.set(Object.prototype, EventWrapper);\nif (typeof Global !== \"undefined\" && typeof Global.Event !== \"undefined\") {\n    wrapperClassCache.set(Global.Event.prototype, EventWrapper);\n}\n/**\n * Get the wrapper class of a given prototype.\n * @param originalEvent The event object to wrap.\n */\nfunction getWrapperClassOf(originalEvent) {\n    const prototype = Object.getPrototypeOf(originalEvent);\n    if (prototype == null) {\n        return EventWrapper;\n    }\n    let wrapper = wrapperClassCache.get(prototype);\n    if (wrapper == null) {\n        wrapper = defineWrapper(getWrapperClassOf(prototype), prototype);\n        wrapperClassCache.set(prototype, wrapper);\n    }\n    return wrapper;\n}\n/**\n * Define new wrapper class.\n * @param BaseEventWrapper The base wrapper class.\n * @param originalPrototype The prototype of the original event.\n */\nfunction defineWrapper(BaseEventWrapper, originalPrototype) {\n    class CustomEventWrapper extends BaseEventWrapper {\n    }\n    const keys = Object.keys(originalPrototype);\n    for (let i = 0; i < keys.length; ++i) {\n        Object.defineProperty(CustomEventWrapper.prototype, keys[i], defineRedirectDescriptor(originalPrototype, keys[i]));\n    }\n    return CustomEventWrapper;\n}\n/**\n * Get the property descriptor to redirect a given property.\n */\nfunction defineRedirectDescriptor(obj, key) {\n    const d = Object.getOwnPropertyDescriptor(obj, key);\n    return {\n        get() {\n            const original = $$1(this).original;\n            const value = original[key];\n            if (typeof value === \"function\") {\n                return value.bind(original);\n            }\n            return value;\n        },\n        set(value) {\n            const original = $$1(this).original;\n            original[key] = value;\n        },\n        configurable: d.configurable,\n        enumerable: d.enumerable,\n    };\n}\n\n/**\n * Create a new listener.\n * @param callback The callback function.\n * @param capture The capture flag.\n * @param passive The passive flag.\n * @param once The once flag.\n * @param signal The abort signal.\n * @param signalListener The abort event listener for the abort signal.\n */\nfunction createListener(callback, capture, passive, once, signal, signalListener) {\n    return {\n        callback,\n        flags: (capture ? 1 /* Capture */ : 0) |\n            (passive ? 2 /* Passive */ : 0) |\n            (once ? 4 /* Once */ : 0),\n        signal,\n        signalListener,\n    };\n}\n/**\n * Set the `removed` flag to the given listener.\n * @param listener The listener to check.\n */\nfunction setRemoved(listener) {\n    listener.flags |= 8 /* Removed */;\n}\n/**\n * Check if the given listener has the `capture` flag or not.\n * @param listener The listener to check.\n */\nfunction isCapture(listener) {\n    return (listener.flags & 1 /* Capture */) === 1 /* Capture */;\n}\n/**\n * Check if the given listener has the `passive` flag or not.\n * @param listener The listener to check.\n */\nfunction isPassive(listener) {\n    return (listener.flags & 2 /* Passive */) === 2 /* Passive */;\n}\n/**\n * Check if the given listener has the `once` flag or not.\n * @param listener The listener to check.\n */\nfunction isOnce(listener) {\n    return (listener.flags & 4 /* Once */) === 4 /* Once */;\n}\n/**\n * Check if the given listener has the `removed` flag or not.\n * @param listener The listener to check.\n */\nfunction isRemoved(listener) {\n    return (listener.flags & 8 /* Removed */) === 8 /* Removed */;\n}\n/**\n * Call an event listener.\n * @param listener The listener to call.\n * @param target The event target object for `thisArg`.\n * @param event The event object for the first argument.\n * @param attribute `true` if this callback is an event attribute handler.\n */\nfunction invokeCallback({ callback }, target, event) {\n    try {\n        if (typeof callback === \"function\") {\n            callback.call(target, event);\n        }\n        else if (typeof callback.handleEvent === \"function\") {\n            callback.handleEvent(event);\n        }\n    }\n    catch (thrownError) {\n        reportError(thrownError);\n    }\n}\n\n/**\n * Find the index of given listener.\n * This returns `-1` if not found.\n * @param list The listener list.\n * @param callback The callback function to find.\n * @param capture The capture flag to find.\n */\nfunction findIndexOfListener({ listeners }, callback, capture) {\n    for (let i = 0; i < listeners.length; ++i) {\n        if (listeners[i].callback === callback &&\n            isCapture(listeners[i]) === capture) {\n            return i;\n        }\n    }\n    return -1;\n}\n/**\n * Add the given listener.\n * Does copy-on-write if needed.\n * @param list The listener list.\n * @param callback The callback function.\n * @param capture The capture flag.\n * @param passive The passive flag.\n * @param once The once flag.\n * @param signal The abort signal.\n */\nfunction addListener(list, callback, capture, passive, once, signal) {\n    let signalListener;\n    if (signal) {\n        signalListener = removeListener.bind(null, list, callback, capture);\n        signal.addEventListener(\"abort\", signalListener);\n    }\n    const listener = createListener(callback, capture, passive, once, signal, signalListener);\n    if (list.cow) {\n        list.cow = false;\n        list.listeners = [...list.listeners, listener];\n    }\n    else {\n        list.listeners.push(listener);\n    }\n    return listener;\n}\n/**\n * Remove a listener.\n * @param list The listener list.\n * @param callback The callback function to find.\n * @param capture The capture flag to find.\n * @returns `true` if it mutated the list directly.\n */\nfunction removeListener(list, callback, capture) {\n    const index = findIndexOfListener(list, callback, capture);\n    if (index !== -1) {\n        return removeListenerAt(list, index);\n    }\n    return false;\n}\n/**\n * Remove a listener.\n * @param list The listener list.\n * @param index The index of the target listener.\n * @param disableCow Disable copy-on-write if true.\n * @returns `true` if it mutated the `listeners` array directly.\n */\nfunction removeListenerAt(list, index, disableCow = false) {\n    const listener = list.listeners[index];\n    // Set the removed flag.\n    setRemoved(listener);\n    // Dispose the abort signal listener if exists.\n    if (listener.signal) {\n        listener.signal.removeEventListener(\"abort\", listener.signalListener);\n    }\n    // Remove it from the array.\n    if (list.cow && !disableCow) {\n        list.cow = false;\n        list.listeners = list.listeners.filter((_, i) => i !== index);\n        return false;\n    }\n    list.listeners.splice(index, 1);\n    return true;\n}\n\n/**\n * Create a new `ListenerListMap` object.\n */\nfunction createListenerListMap() {\n    return Object.create(null);\n}\n/**\n * Get the listener list of the given type.\n * If the listener list has not been initialized, initialize and return it.\n * @param listenerMap The listener list map.\n * @param type The event type to get.\n */\nfunction ensureListenerList(listenerMap, type) {\n    var _a;\n    return ((_a = listenerMap[type]) !== null && _a !== void 0 ? _a : (listenerMap[type] = {\n        attrCallback: undefined,\n        attrListener: undefined,\n        cow: false,\n        listeners: [],\n    }));\n}\n\n/**\n * An implementation of the `EventTarget` interface.\n * @see https://dom.spec.whatwg.org/#eventtarget\n */\nclass EventTarget {\n    /**\n     * Initialize this instance.\n     */\n    constructor() {\n        internalDataMap$2.set(this, createListenerListMap());\n    }\n    // Implementation\n    addEventListener(type0, callback0, options0) {\n        const listenerMap = $$2(this);\n        const { callback, capture, once, passive, signal, type, } = normalizeAddOptions(type0, callback0, options0);\n        if (callback == null || (signal === null || signal === void 0 ? void 0 : signal.aborted)) {\n            return;\n        }\n        const list = ensureListenerList(listenerMap, type);\n        // Find existing listener.\n        const i = findIndexOfListener(list, callback, capture);\n        if (i !== -1) {\n            warnDuplicate(list.listeners[i], passive, once, signal);\n            return;\n        }\n        // Add the new listener.\n        addListener(list, callback, capture, passive, once, signal);\n    }\n    // Implementation\n    removeEventListener(type0, callback0, options0) {\n        const listenerMap = $$2(this);\n        const { callback, capture, type } = normalizeOptions(type0, callback0, options0);\n        const list = listenerMap[type];\n        if (callback != null && list) {\n            removeListener(list, callback, capture);\n        }\n    }\n    // Implementation\n    dispatchEvent(e) {\n        const list = $$2(this)[String(e.type)];\n        if (list == null) {\n            return true;\n        }\n        const event = e instanceof Event ? e : EventWrapper.wrap(e);\n        const eventData = $(event, \"event\");\n        if (eventData.dispatchFlag) {\n            throw createInvalidStateError(\"This event has been in dispatching.\");\n        }\n        eventData.dispatchFlag = true;\n        eventData.target = eventData.currentTarget = this;\n        if (!eventData.stopPropagationFlag) {\n            const { cow, listeners } = list;\n            // Set copy-on-write flag.\n            list.cow = true;\n            // Call listeners.\n            for (let i = 0; i < listeners.length; ++i) {\n                const listener = listeners[i];\n                // Skip if removed.\n                if (isRemoved(listener)) {\n                    continue;\n                }\n                // Remove this listener if has the `once` flag.\n                if (isOnce(listener) && removeListenerAt(list, i, !cow)) {\n                    // Because this listener was removed, the next index is the\n                    // same as the current value.\n                    i -= 1;\n                }\n                // Call this listener with the `passive` flag.\n                eventData.inPassiveListenerFlag = isPassive(listener);\n                invokeCallback(listener, this, event);\n                eventData.inPassiveListenerFlag = false;\n                // Stop if the `event.stopImmediatePropagation()` method was called.\n                if (eventData.stopImmediatePropagationFlag) {\n                    break;\n                }\n            }\n            // Restore copy-on-write flag.\n            if (!cow) {\n                list.cow = false;\n            }\n        }\n        eventData.target = null;\n        eventData.currentTarget = null;\n        eventData.stopImmediatePropagationFlag = false;\n        eventData.stopPropagationFlag = false;\n        eventData.dispatchFlag = false;\n        return !eventData.canceledFlag;\n    }\n}\n/**\n * Internal data.\n */\nconst internalDataMap$2 = new WeakMap();\n/**\n * Get private data.\n * @param target The event target object to get private data.\n * @param name The variable name to report.\n * @returns The private data of the event.\n */\nfunction $$2(target, name = \"this\") {\n    const retv = internalDataMap$2.get(target);\n    assertType(retv != null, \"'%s' must be an object that EventTarget constructor created, but got another one: %o\", name, target);\n    return retv;\n}\n/**\n * Normalize options.\n * @param options The options to normalize.\n */\nfunction normalizeAddOptions(type, callback, options) {\n    var _a;\n    assertCallback(callback);\n    if (typeof options === \"object\" && options !== null) {\n        return {\n            type: String(type),\n            callback: callback !== null && callback !== void 0 ? callback : undefined,\n            capture: Boolean(options.capture),\n            passive: Boolean(options.passive),\n            once: Boolean(options.once),\n            signal: (_a = options.signal) !== null && _a !== void 0 ? _a : undefined,\n        };\n    }\n    return {\n        type: String(type),\n        callback: callback !== null && callback !== void 0 ? callback : undefined,\n        capture: Boolean(options),\n        passive: false,\n        once: false,\n        signal: undefined,\n    };\n}\n/**\n * Normalize options.\n * @param options The options to normalize.\n */\nfunction normalizeOptions(type, callback, options) {\n    assertCallback(callback);\n    if (typeof options === \"object\" && options !== null) {\n        return {\n            type: String(type),\n            callback: callback !== null && callback !== void 0 ? callback : undefined,\n            capture: Boolean(options.capture),\n        };\n    }\n    return {\n        type: String(type),\n        callback: callback !== null && callback !== void 0 ? callback : undefined,\n        capture: Boolean(options),\n    };\n}\n/**\n * Assert the type of 'callback' argument.\n * @param callback The callback to check.\n */\nfunction assertCallback(callback) {\n    if (typeof callback === \"function\" ||\n        (typeof callback === \"object\" &&\n            callback !== null &&\n            typeof callback.handleEvent === \"function\")) {\n        return;\n    }\n    if (callback == null || typeof callback === \"object\") {\n        InvalidEventListener.warn(callback);\n        return;\n    }\n    throw new TypeError(format(InvalidEventListener.message, [callback]));\n}\n/**\n * Print warning for duplicated.\n * @param listener The current listener that is duplicated.\n * @param passive The passive flag of the new duplicated listener.\n * @param once The once flag of the new duplicated listener.\n * @param signal The signal object of the new duplicated listener.\n */\nfunction warnDuplicate(listener, passive, once, signal) {\n    EventListenerWasDuplicated.warn(isCapture(listener) ? \"capture\" : \"bubble\", listener.callback);\n    if (isPassive(listener) !== passive) {\n        OptionWasIgnored.warn(\"passive\");\n    }\n    if (isOnce(listener) !== once) {\n        OptionWasIgnored.warn(\"once\");\n    }\n    if (listener.signal !== signal) {\n        OptionWasIgnored.warn(\"signal\");\n    }\n}\n// Set enumerable\nconst keys$1 = Object.getOwnPropertyNames(EventTarget.prototype);\nfor (let i = 0; i < keys$1.length; ++i) {\n    if (keys$1[i] === \"constructor\") {\n        continue;\n    }\n    Object.defineProperty(EventTarget.prototype, keys$1[i], { enumerable: true });\n}\n// Ensure `eventTarget instanceof window.EventTarget` is `true`.\nif (typeof Global !== \"undefined\" &&\n    typeof Global.EventTarget !== \"undefined\") {\n    Object.setPrototypeOf(EventTarget.prototype, Global.EventTarget.prototype);\n}\n\n/**\n * Get the current value of a given event attribute.\n * @param target The `EventTarget` object to get.\n * @param type The event type.\n */\nfunction getEventAttributeValue(target, type) {\n    var _a, _b;\n    const listMap = $$2(target, \"target\");\n    return (_b = (_a = listMap[type]) === null || _a === void 0 ? void 0 : _a.attrCallback) !== null && _b !== void 0 ? _b : null;\n}\n/**\n * Set an event listener to a given event attribute.\n * @param target The `EventTarget` object to set.\n * @param type The event type.\n * @param callback The event listener.\n */\nfunction setEventAttributeValue(target, type, callback) {\n    if (callback != null && typeof callback !== \"function\") {\n        InvalidAttributeHandler.warn(callback);\n    }\n    if (typeof callback === \"function\" ||\n        (typeof callback === \"object\" && callback !== null)) {\n        upsertEventAttributeListener(target, type, callback);\n    }\n    else {\n        removeEventAttributeListener(target, type);\n    }\n}\n//------------------------------------------------------------------------------\n// Helpers\n//------------------------------------------------------------------------------\n/**\n * Update or insert the given event attribute handler.\n * @param target The `EventTarget` object to set.\n * @param type The event type.\n * @param callback The event listener.\n */\nfunction upsertEventAttributeListener(target, type, callback) {\n    const list = ensureListenerList($$2(target, \"target\"), String(type));\n    list.attrCallback = callback;\n    if (list.attrListener == null) {\n        list.attrListener = addListener(list, defineEventAttributeCallback(list), false, false, false, undefined);\n    }\n}\n/**\n * Remove the given event attribute handler.\n * @param target The `EventTarget` object to remove.\n * @param type The event type.\n * @param callback The event listener.\n */\nfunction removeEventAttributeListener(target, type) {\n    const listMap = $$2(target, \"target\");\n    const list = listMap[String(type)];\n    if (list && list.attrListener) {\n        removeListener(list, list.attrListener.callback, false);\n        list.attrCallback = list.attrListener = undefined;\n    }\n}\n/**\n * Define the callback function for the given listener list object.\n * It calls `attrCallback` property if the property value is a function.\n * @param list The `ListenerList` object.\n */\nfunction defineEventAttributeCallback(list) {\n    return function (event) {\n        const callback = list.attrCallback;\n        if (typeof callback === \"function\") {\n            callback.call(this, event);\n        }\n    };\n}\n\n/**\n * Define an `EventTarget` class that has event attibutes.\n * @param types The types to define event attributes.\n * @deprecated Use `getEventAttributeValue`/`setEventAttributeValue` pair on your derived class instead because of static analysis friendly.\n */\nfunction defineCustomEventTarget(...types) {\n    class CustomEventTarget extends EventTarget {\n    }\n    for (let i = 0; i < types.length; ++i) {\n        defineEventAttribute(CustomEventTarget.prototype, types[i]);\n    }\n    return CustomEventTarget;\n}\n/**\n * Define an event attribute.\n * @param target The `EventTarget` object to define an event attribute.\n * @param type The event type to define.\n * @param _eventClass Unused, but to infer `Event` class type.\n * @deprecated Use `getEventAttributeValue`/`setEventAttributeValue` pair on your derived class instead because of static analysis friendly.\n */\nfunction defineEventAttribute(target, type, _eventClass) {\n    Object.defineProperty(target, `on${type}`, {\n        get() {\n            return getEventAttributeValue(this, type);\n        },\n        set(value) {\n            setEventAttributeValue(this, type, value);\n        },\n        configurable: true,\n        enumerable: true,\n    });\n}\n\nexports.Event = Event;\nexports.EventTarget = EventTarget;\nexports.default = EventTarget;\nexports.defineCustomEventTarget = defineCustomEventTarget;\nexports.defineEventAttribute = defineEventAttribute;\nexports.getEventAttributeValue = getEventAttributeValue;\nexports.setErrorHandler = setErrorHandler;\nexports.setEventAttributeValue = setEventAttributeValue;\nexports.setWarningHandler = setWarningHandler;\n//# sourceMappingURL=index.js.map\n","import naja from 'naja';\n\nimport DependentSelectBox from './DependentSelectBox';\n\nnaja.registerExtension(new DependentSelectBox());\n\ndocument.addEventListener('DOMContentLoaded', naja.initialize.bind(naja));\n","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n"],"sourceRoot":""}