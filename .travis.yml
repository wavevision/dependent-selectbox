os: linux
dist: xenial

git:
  depth: 1

jobs:
  include:
    - stage: PHP
      language: php
      php: 7.4
      before_install: pecl install pcov
      install: composer install
      cache:
        directories:
          - $HOME/.composer/cache
      script: composer phing ci
    - stage: TypeScript
      language: node_js
      cache:
        yarn: true
        directories:
          - node_modules
      script: yarn ci

notifications:
  webhooks:
    - https://coveralls.io/webhook

